{"version":3,"sources":["Fade.tsx","strategy/models/Suite.ts","strategy/models/const.ts","Card.tsx","imgs/neko-40x40.png","common/cardUtils.ts","Divider.tsx","MyButton.tsx","CardsChooser.tsx","RankChooser.tsx","styles.tsx","Home.tsx","icons/close.svg","strategy/models/Rank.ts","strategy/models/Card.ts","SolutionVisualization.tsx","strategy/const.ts","strategy/models/Play.ts","strategy/iterate.ts","strategy/utils.ts","strategy/models/GameContext.ts","strategy/scorers.ts","strategy/strategy.ts","ResultPage.tsx","useRouterState.ts","useWindowSize.tsx","App.tsx","useCardState.ts","useResultState.ts","serviceWorker.ts","index.tsx"],"names":["delay","fn","requestAnimationFrame","Fade","children","style","timeout","restProps","useState","Animated","Value","fadeAnim","onEntering","timing","toValue","duration","start","onExiting","View","opacity","defaultProps","appear","enter","mountOnEnter","unmountOnExit","SUIT_NORMAL","H","value","label","text","color","D","S","C","SUIT_JOKER","B","R","SUITS_JOKER","SUIT","SUITS","NEXT_SUIT","undefined","Q","K","BLACK_JOKER","RED_JOKER","NATURAL_RANKS","NATURAL_RANK","naturalRank","2","3","4","5","6","7","8","9","10","NATURAL_RANKS_WITHOUT_JOKERS","slice","length","styles","StyleSheet","create","card","width","height","backgroundColor","borderColor","borderWidth","borderRadius","cardLarge","cardStacked","marginRight","marginBottom","cardStackedLarge","cardLabel","fontFamily","fontSize","lineHeight","textAlign","marginTop","fontWeight","cardLabelLarge","cardCuteImage","position","left","top","cardCuteImageLarge","overlayWhenDisabled","right","bottom","Card","rank","suit","isStacked","disabled","large","rankDef","suitDef","Text","split","join","Image","source","uri","CardDeck","cards","hands","stackedCardMargin","ScrollView","contentContainerStyle","flexWrap","flexDirection","padding","paddingRight","paddingBottom","map","index","hand","handID","handNode","cardID","maxWidth","ALL_CARDS_ONE_DECK","reduce","res","push","cardCompare","a","b","generateRandomHands","i","j","Math","floor","random","x","shuffle","sort","canIAddCard","cardToAdd","filter","divider","marginHorizontal","Divider","MyButton","titleStyle","title","TouchableOpacity","theme","background","button","paddingVertical","paddingHorizontal","alignItems","justifyContent","palette","0","useRankState","defaultValue","setValue","increase","useCallback","valueNow","decrease","useIncDecState","incRank","decRank","controlStyles","incDecButton","flex","minWidth","margin","actionButton","buttonTitle","buttonTitleSmall","ControlPanel","props","alignContent","onPress","randomCards","numberOfCards","clearCards","deleteLastCard","AddCardPanel","suits","canIAddThisCard","addCard","CardsChooser","windowSize","flexGrow","horizontal","RankChooser","setRank","Picker","selectedValue","onValueChange","itemValue","Number","isInteger","Error","assertNonJokerNaturalRank","parseInt","Item","commonStyles","container","borderBox","HomePage","navigation","handleSolutionCalcButton","navigate","MemoedHomePage","React","memo","HomePageWrapper","screenProps","_extends","Object","assign","target","arguments","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","fill","d","_ref3","SvgClose","_ref","svgRef","titleId","xmlns","viewBox","ref","id","ForwardRef","makeRank","natural","context","power","getOrder","cardToCardRaw","CloseWindowButton","onClose","SolutionView","strategyResult","flexShrink","plans","score","hiddenMoreSolutions","plan","planIndex","plays","play","MemoedSolutionView","SolutionVisualization","result","MAX_PLANS","PlayType","NEXT_PLAY_TYPE","STRAIGHT_FLUSH","BOMB_N_TUPLE","PLATE","TUBE","STRAIGHT","PAIR","TRIPLE","ITERATOR_STATE_START","type","nextIteratorState","now","next","nextRank","console","assert","nextSuit","nextType","playType","iteratePlans","collectPlan","gameContext","iterateImp","cardsByRank","organize","game","debug","organized","forEach","isWildCard","takeCard","count","rankCards","taken","wildCards","wildCardsNeeded","concat","takeCardBySuit","findIndex","splice","playCardsOfTheSameRank","n","nowRank","newCards","playRank","cardCount","playCardSequence","log","JSON","stringify","end","newCardsByRank","playPair","playTriple","playBomb4","playBomb5","playBomb6","playBomb7","playBomb8","playStraight","playTube","playPlate","PLAY_TYPE_FUNC","newPlan","pairIndex","triplePlay","pairPlay","FULL_HOUSE","nowSuit","func","resultPlan","entries","_","SINGLE","playRestOfCardsAsSingles","getUsualPowerRank","GameContext","constructor","mainRank","usualRank","handsScore","MAX_SCORE","heuristicScore","scoreByPlayType","linear","y","FOUR_JOKER","heuristicScorePlay","cap","values","sum","min","max","calc","rawCards","morePlans","scorer","rawCard","raw","parseCardRaw","scorerFunc","planCollector","makeAllBestPlansCollector","bestPlans","getBestPlans","bestPlanCollector","makeBestPlanCollector","bestPlan","getBestPlan","bestScore","currentScore","ResultPage","args1","useQuery","status1","status","plans1","data","args2","enabled","status2","plans2","goBack","millis","Promise","resolve","setTimeout","NOT_FOUND","NOT_FOUND_CONFIG","path","calcWindowSize","Dimensions","get","absoluteChild","routes","Home","Result","AppNavigator","route","currentRoute","RouteComponent","useRouterState","providedRoutesConfig","history","routesConfig","getCurrentPath","pathNowRaw","location","pathname","startsWith","base","substring","endsWith","match","find","routeConfig","setRoute","useEffect","listen","action","window","document","routeToDispatch","replace","routeMatched","createBrowserRouterHook","process","defaultRoute","createHistory","App","cardStateProps","setCards","cardsNow","useCardState","resultProps","setResult","useResultState","size","setSize","handleWindowSizeChange","addEventListener","removeEventListener","useWindowSize","queryClient","QueryClient","EnhancedApp","QueryClientProvider","client","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","error","AppRegistry","registerComponent","runApplication","rootTag","getElementById","URL","href","origin","fetch","response","contentType","headers","ready","unregister","reload","checkValidServiceWorker","guidanceNode","parentNode","removeChild","removeWechatGuidance"],"mappings":"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","file":"static/js/main.fe4b8e5c.chunk.js","sourcesContent":["import React, { useState, FunctionComponent } from 'react'\nimport { Animated, StyleProp, ViewStyle } from 'react-native'\nimport { Transition } from 'react-transition-group'\nimport { TransitionProps } from 'react-transition-group/Transition'\n\ninterface FadeProps extends TransitionProps {\n  style?: StyleProp<ViewStyle>\n  timeout: number\n}\n\nfunction delay(fn: () => void) {\n  return requestAnimationFrame(() => {\n    // current frame\n    requestAnimationFrame(() => {\n      // next frame, react updated dom\n      requestAnimationFrame(() => {\n        // the third frame, start animation in the first idle frame\n        fn()\n      })\n    })\n  })\n}\n\n// animation may be delayed by react rendering\n// keep components mounted for some extra time to ensure animation finishes before components are unmounted\nconst EXTRA_TIMEOUT = 300\n\nexport const Fade: FunctionComponent<FadeProps> = ({\n  children,\n  style,\n  timeout,\n  ...restProps\n}) => {\n  const [fadeAnim, _] = useState(new Animated.Value(0))\n\n  return (\n    <Transition\n      timeout={timeout + EXTRA_TIMEOUT}\n      onEntering={() => {\n        // start fading in from the next frame (react is rendering in current frame, so animation would be laggy if started immediately)\n        delay(() => {\n          Animated.timing(fadeAnim, { toValue: 1, duration: timeout }).start()\n        })\n      }}\n      onExiting={() => {\n        // start fading out after a delay\n        delay(() => {\n          Animated.timing(fadeAnim, {\n            toValue: 0,\n            duration: timeout,\n          }).start()\n        })\n      }}\n      {...restProps}\n    >\n      <Animated.View\n        style={[\n          {\n            opacity: fadeAnim,\n          },\n          style,\n        ]}\n      >\n        {children}\n      </Animated.View>\n    </Transition>\n  )\n}\nFade.defaultProps = {\n  appear: true,\n  enter: true,\n  mountOnEnter: true,\n  unmountOnExit: true,\n}\n","export type Suit = 'S' | 'C' | 'D' | 'H'\nexport type SuitRedJoker = 'R'\nexport type SuitBlackJoker = 'B'\nexport type SuitJoker = SuitRedJoker | SuitBlackJoker\nexport type AllSuit = Suit | SuitRedJoker | SuitBlackJoker\nexport type SuiteMetadata<S> = {\n  value: S\n  label: string\n  text: string\n  color: string\n}\nexport const SUIT_NORMAL: Record<Suit, SuiteMetadata<Suit>> = {\n  H: {\n    value: 'H',\n    label: '♥',\n    text: '♥',\n    color: 'red',\n  },\n  D: {\n    value: 'D',\n    label: '♦',\n    text: '♦',\n    color: 'red',\n  },\n  S: {\n    value: 'S',\n    label: '♠',\n    text: '♠',\n    color: 'black',\n  },\n  C: {\n    value: 'C',\n    label: '♣',\n    text: '♣',\n    color: 'black',\n  },\n} as const\nexport const SUIT_JOKER: Record<SuitJoker, SuiteMetadata<SuitJoker>> = {\n  B: {\n    // black joker\n    value: 'B',\n    label: '',\n    text: 'B',\n    color: 'black',\n  },\n  R: {\n    // red joker\n    value: 'R',\n    label: '',\n    text: 'R',\n    color: 'red',\n  },\n} as const\nexport const SUITS_JOKER = [SUIT_JOKER.B, SUIT_JOKER.R]\nexport const SUIT = {\n  ...SUIT_NORMAL,\n  ...SUIT_JOKER,\n}\nexport const SUITS = [\n  SUIT_NORMAL.H,\n  SUIT_NORMAL.S,\n  SUIT_NORMAL.C,\n  SUIT_NORMAL.D,\n]\nexport const SUIT_VALUES = ['S', 'C', 'D', 'H']\nexport function parseSuit(\n  suit: string,\n): [undefined, string] | [Suit, undefined] {\n  if (!SUIT_VALUES.includes(suit)) {\n    return [\n      undefined,\n      `Suit should be one of ${SUIT_VALUES}, but found ${suit}.`,\n    ]\n  }\n  return [suit as Suit, undefined]\n}\n\nconst NEXT_SUIT = {\n  S: 'C',\n  C: 'D',\n  D: 'H',\n  H: undefined,\n} as const\nexport const SUIT_START: Suit = 'S'\nexport function getNextSuit(suit: Suit): Suit | undefined {\n  return NEXT_SUIT[suit]\n}\n","import { AllSuit, parseSuit, Suit, SuitBlackJoker, SuitRedJoker } from './Suite'\n\nexport type J = 11\nexport const J = 11\nexport type Q = 12\nexport const Q = 12\nexport type K = 13\nexport const K = 13\nexport type A = 1\nexport const A = 1\nexport type BlackJoker = 14\nexport const BLACK_JOKER = 14\nexport type RedJoker = 15\nexport const RED_JOKER = 15\nexport type NaturalRank =\n  | A\n  | 2\n  | 3\n  | 4\n  | 5\n  | 6\n  | 7\n  | 8\n  | 9\n  | 10\n  | J\n  | Q\n  | K\n  | BlackJoker\n  | RedJoker\nexport const NATURAL_RANK_MIN = A\nexport const NATURAL_RANK_MAX = RED_JOKER\nexport type NaturalRankWithoutJokers = Exclude<\n  NaturalRank,\n  BlackJoker | RedJoker\n>\nexport const NATURAL_RANKS = [\n  A,\n  2,\n  3,\n  4,\n  5,\n  6,\n  7,\n  8,\n  9,\n  10,\n  J,\n  Q,\n  K,\n  BLACK_JOKER,\n  RED_JOKER,\n] as const\ninterface RankMetadata {\n  label: string\n  text: string\n  naturalRank: NaturalRank\n}\nexport const NATURAL_RANK: Record<NaturalRank, RankMetadata> = {\n  [A]: { label: 'A', text: 'A', naturalRank: A },\n  2: { label: '2', text: '2', naturalRank: 2 },\n  3: { label: '3', text: '3', naturalRank: 3 },\n  4: { label: '4', text: '4', naturalRank: 4 },\n  5: { label: '5', text: '5', naturalRank: 5 },\n  6: { label: '6', text: '6', naturalRank: 6 },\n  7: { label: '7', text: '7', naturalRank: 7 },\n  8: { label: '8', text: '8', naturalRank: 8 },\n  9: { label: '9', text: '9', naturalRank: 9 },\n  10: { label: '10', text: '10', naturalRank: 10 },\n  [J]: { label: 'J', text: 'J', naturalRank: J },\n  [Q]: { label: 'Q', text: 'Q', naturalRank: Q },\n  [K]: { label: 'K', text: 'K', naturalRank: K },\n  [BLACK_JOKER]: { label: 'Joker', text: 'J', naturalRank: BLACK_JOKER },\n  [RED_JOKER]: { label: 'Joker', text: 'J', naturalRank: RED_JOKER },\n} as const\nexport function nextRank(rank: NaturalRank): NaturalRank | undefined {\n  const next = rank + 1\n  if (next > RED_JOKER) {\n    return undefined\n  }\n  return next as NaturalRank\n}\nexport const NATURAL_RANKS_WITHOUT_JOKERS: NaturalRankWithoutJokers[] = NATURAL_RANKS.slice(\n  0,\n  NATURAL_RANKS.length - 2,\n) as any\n/**\n * There are 15 different cards. In one game play, they will have a power\n * rank depending on main rank.\n */\nexport type PowerRank =\n  | 0\n  | 1\n  | 2\n  | 3\n  | 4\n  | 5\n  | 6\n  | 7\n  | 8\n  | 9\n  | 10\n  | 11\n  | 12\n  | 13\n  | 14\nexport const POWER_RANK_MAX = 14\nexport type CardRaw =\n  | {\n      // Natural rank, from [A, K] maps to [1, 13]\n      // 14 is kept for A's order rank.\n      // Black Joker is 15, Red Joker is 16\n      rank: NaturalRankWithoutJokers\n      suit: Suit\n    }\n  | {\n      rank: BlackJoker\n      suit: SuitBlackJoker\n    }\n  | {\n      rank: RedJoker\n      suit: SuitRedJoker\n    }\nexport type CardRawLoose = { rank: NaturalRank; suit: AllSuit }\n\nexport function parseRawCards(text: string): CardRaw[] {\n  const cards: CardRaw[] = []\n  for (let i = 0; i < text.length; ) {\n    if (text[i] === 'R') {\n      if (text[i + 1] !== 'J') {\n        throw new Error(\n          `R should be followed by J -- red joker in ${text}, position ${i}`,\n        )\n      }\n      cards.push({ rank: RED_JOKER, suit: 'R' })\n      i += 2\n    } else if (text[i] === 'B') {\n      if (text[i + 1] !== 'J') {\n        throw new Error(\n          `B should be followed by J -- black joker in ${text}, position ${i}`,\n        )\n      }\n      cards.push({ rank: BLACK_JOKER, suit: 'B' })\n      i += 2\n    } else {\n      const parsedSuit = parseSuit(text[i])\n      const [_, error] = parsedSuit\n      if (parsedSuit[1] != null) {\n        throw new Error(`${error}, in ${text}, position ${i}`)\n      }\n      const [suit] = parsedSuit\n      if (text[i + 1] === '1' && text[i + 2] === '0') {\n        cards.push({ rank: 10, suit })\n        i += 3\n      } else if (text[i + 1] === 'A') {\n        cards.push({ rank: A, suit })\n        i += 2\n      } else if (text[i + 1] === 'J') {\n        cards.push({ rank: J, suit })\n        i += 2\n      } else if (text[i + 1] === 'Q') {\n        cards.push({ rank: Q, suit })\n        i += 2\n      } else if (text[i + 1] === 'K') {\n        cards.push({ rank: K, suit })\n        i += 2\n      } else {\n        const rank = text[i + 1].charCodeAt(0) - '0'.charCodeAt(0)\n        if (rank < 2 || rank > 9) {\n          throw new Error(\n            `Rank should be in range [2, 9], but found ${rank}, in ${text}, position ${\n              i + 1\n            }`,\n          )\n        }\n        cards.push({ rank: rank as NaturalRankWithoutJokers, suit })\n        i += 2\n      }\n    }\n  }\n  return cards\n}\n","import React from 'react'\nimport {\n  Image,\n  ScrollView,\n  StyleProp,\n  StyleSheet,\n  Text,\n  View,\n  ViewStyle,\n} from 'react-native'\nimport nekoImg from './imgs/neko-40x40.png'\nimport {\n  CardRaw,\n  CardRawLoose,\n  NATURAL_RANK,\n  NATURAL_RANKS,\n} from './strategy/models/const'\nimport { Suit, SUIT } from './strategy/models/Suite'\n\nconst STACKED_CARD_MARGIN = 52\nconst STACKED_CARD_MARGIN_LARGE = 68\n\nconst styles = StyleSheet.create({\n  card: {\n    width: 74,\n    height: 100,\n    backgroundColor: 'white',\n    borderColor: 'black',\n    borderWidth: 2,\n    borderRadius: 4,\n  },\n  cardLarge: {\n    width: 100,\n    height: 134,\n  },\n  cardStacked: {\n    marginRight: -STACKED_CARD_MARGIN,\n    marginBottom: -STACKED_CARD_MARGIN,\n  },\n  cardStackedLarge: {\n    marginRight: -STACKED_CARD_MARGIN_LARGE,\n    marginBottom: -STACKED_CARD_MARGIN_LARGE,\n  },\n  cardLabel: {\n    fontFamily: 'monospace',\n    fontSize: 16,\n    lineHeight: 16,\n    textAlign: 'center',\n    width: 20,\n    marginTop: 4,\n    fontWeight: 'bold',\n  },\n  cardLabelLarge: {\n    fontSize: 24,\n    lineHeight: 24,\n    width: 30,\n  },\n  cardCuteImage: {\n    position: 'absolute',\n    left: 'calc(50% - 20px)',\n    top: 'calc(50% - 20px)',\n    width: 40,\n    height: 40,\n  },\n  cardCuteImageLarge: {\n    width: 56,\n    height: 56,\n    left: 'calc(50% - 28px)',\n    top: 'calc(50% - 28px)',\n  },\n  overlayWhenDisabled: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\n  },\n})\n\nexport function Card({\n  rank,\n  suit,\n  isStacked,\n  disabled,\n  style,\n  large,\n}: CardRawLoose & {\n  isStacked?: boolean\n  disabled?: boolean\n  style?: StyleProp<ViewStyle>\n  large?: boolean\n}) {\n  const rankDef = NATURAL_RANK[rank]\n  const suitDef = SUIT[suit as Suit] // TODO: fix type force cast\n  return (\n    <View\n      style={[\n        styles.card,\n        large && styles.cardLarge,\n        isStacked && styles.cardStacked,\n        isStacked && large && styles.cardStackedLarge,\n        style,\n      ]}\n    >\n      <Text\n        style={[\n          styles.cardLabel,\n          large && styles.cardLabelLarge,\n          { color: suitDef.color },\n        ]}\n      >\n        {rankDef.label === '10'\n          ? rankDef.label\n          : rankDef.label.split('').join('\\n')}\n        {'\\n'}\n        {suitDef.label}\n      </Text>\n      <Image\n        source={{ uri: nekoImg }}\n        style={[styles.cardCuteImage, large && styles.cardCuteImageLarge]}\n      />\n      {disabled && <View style={styles.overlayWhenDisabled} />}\n    </View>\n  )\n}\n\nconst HAND_MARGIN = 13\nconst CONTAINER_PADDING = 0\n\ninterface CardDeckProps {\n  cards?: CardRaw[]\n  hands?: CardRaw[][]\n  style?: StyleProp<ViewStyle>\n  large?: boolean\n}\nexport const CardDeck: React.FunctionComponent<CardDeckProps> = ({\n  cards,\n  hands,\n  style,\n  large,\n}) => {\n  const stackedCardMargin = large\n    ? STACKED_CARD_MARGIN_LARGE\n    : STACKED_CARD_MARGIN\n\n  return (\n    <ScrollView\n      style={style}\n      contentContainerStyle={{\n        flexWrap: 'wrap',\n        flexDirection: 'row',\n        padding: CONTAINER_PADDING,\n        paddingRight: stackedCardMargin + CONTAINER_PADDING, // cancel margin of hands\n        paddingBottom: stackedCardMargin + CONTAINER_PADDING,\n      }}\n    >\n      {!!cards &&\n        cards.map((card, index) => (\n          <Card\n            key={card.rank + card.suit + index}\n            {...card}\n            isStacked\n            large={large}\n          />\n        ))}\n      {!!hands &&\n        hands.map((hand, handID) => {\n          const handNode = hand.map((card, cardID) => (\n            <Card\n              key={card.rank + card.suit + cardID}\n              {...card}\n              isStacked\n              large={large}\n            />\n          ))\n\n          if (handID > 0) {\n            // no wrapping\n            return (\n              <View\n                style={{\n                  flexDirection: 'row',\n                  flexWrap: 'nowrap',\n                  marginRight: HAND_MARGIN,\n                }}\n                key={handID}\n              >\n                {handNode}\n              </View>\n            )\n          } else {\n            // initial hand can be long, allow wrapping as normal\n            return (\n              <View\n                style={{\n                  flexDirection: 'row',\n                  flexWrap: 'wrap',\n                  marginRight: HAND_MARGIN,\n                  maxWidth: '100%', // set max width to enable wrapping\n                }}\n                key={handID}\n              >\n                {handNode}\n              </View>\n            )\n          }\n        })}\n    </ScrollView>\n  )\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAQAAAAm93DmAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfjAhUINB2XPPnXAAAEaElEQVRIx52WWWxUZRTHf3e2TmfrdJlaSWlRlkK6AA1BiCQNWzRIUBACwS1Go2LE0JASwaSVh8qDxroEhBcJFBMTbNQGFRIftAqoIBpKY9vU0EUK0xY6bYdZ78zxodLZ7nTh/3bv+c7vnO+c8333wv0olwp0M3EoZBMZaa0KB/mFnJkAd+BhW1rrKr1b6aV4JsDXHWJpZYGmLcdwdqvMGqRM21W7Es71bCmjFpuG7cWV62qwmrDMJMP63fKPLA3yhjHZsjynt1nuyJIA67VdDZpvc208TJ3ppZrbV2jHRTYWwIuP/c/O3kCQLCO50wfqsDsI4aSwaPiEy5eX77SaDeAPDQcHsjv4kJWYdem6rAXUK47f2M5tqtg3byEF2DAihDO93KKV83xFB5Rg5e506mdgQ0bXajkuNyQqWopIjxyVR/3GM1RNPd5ZHJx/56gMy1QakPekyE0N1slwLuXkOvWPKWHjisrPsiLIYZzpcNmceira9//yoLSLOwHgl0tyMwnaIWtUjmjOKwYOrY30TSxtEpdsE1+c8xdikxcknIJcHuKtWC1jRX1szq53dYUTj0bCWBJqbqOYwpQuLKDe+EA1q1KaofxQnxA5KJfFLaoEREQVv4hEZFD8ml3fKzSRmQjcXO7v0VjcJPslJEekJmWr8bomxSOsid+yjk2Pm4sSIrj5Hcihidf4iJI0Z3RcC1ntYKMS96bA2vZ9UtRjsklCEpW3BdknYRG5LuckkibHE6K/SNZ4bwEKXbOSLz8HrRzCyRnycRPEwHE6WZsmxzKyi4cKGLkHzHdZks/6RsY4Thd1VLCbXRRymnfQpwEWkGcfirt/nlwV9mpspFmWyYCIXJC5skJOJkxlogZlsY+qWFN8PjWgEbecMFcAJzbe57nkyYiTD1+YQAzoHvAOaSwrYi0f0EcjD7KUydTPkIfBGPDfwe5rGst07EXhCb7kzSk+IX/h6eLWxGMGNLya5vbrlQZpFnXSeycoW4TaxBBVDw23yf3qguTfojIRmMHne6bII50C8rxwOHWiluX1NN8XsFHs7SxKKaseXll8988Z41pknocd2q0yUfeIf7ofgHH9KKVjVKc9QJg5UDry9aRXVUxBOSVzh9iNkUlkYHtu9x7pTDNE9xSRq/Ky2L08g5IISE42SmegKlByji4cZGsG93KJjzlGDn2BsU/oS84oWZmG/APY2ck3zKeCcopwYATCeOjmKq10E6CRUjba+mdzcSqgJdOZw2VG1R2GCvaOqS3OrMxsvRlUv++Ox++o+tTsppYeKjGm7lADqFMMn/Fdf+Ts+Z0FZrUzVD0QwooJCOElK3S6t6RJ9bQ2lFaaIiDJ7rGS5lNJMS7mKFuVrOgNbuqWWAzeUfqQCTcFhSKzPaRGr+vnPG38VXp/oo1Rhujnb9pQ44EL2cwiCnBiwoYBK1HAhDmlbRECKIgSJChRvHi5TQ8tfEuQpKbrMJFBBhb02NEBFo3fDJVhBAjgJ8xdQoQI3zP+B8PxaLIJz6YTAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTAyLTIxVDA4OjUyOjI5KzAwOjAwIu73FAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wMi0yMVQwODo1MjoyOSswMDowMFOzT6gAAAAASUVORK5CYII=\"","import {\n  BLACK_JOKER,\n  CardRaw,\n  NATURAL_RANKS,\n  RED_JOKER,\n} from '../strategy/models/const'\nimport { SUITS } from '../strategy/models/Suite'\n\nconst ALL_CARDS_ONE_DECK: CardRaw[] = NATURAL_RANKS.map((rank): CardRaw[] =>\n  rank === BLACK_JOKER\n    ? [{ rank, suit: 'B' }]\n    : rank === RED_JOKER\n    ? [{ rank, suit: 'R' }]\n    : SUITS.map((suit) => ({\n        rank,\n        suit: suit.value,\n      })),\n).reduce((res, cards) => {\n  res.push(...cards)\n  return res\n}, [])\n\n/**\n * reference: https://stackoverflow.com/a/6274381\n * Shuffles array in place.\n * @param {Array} a items An array containing the items.\n */\nfunction shuffle<T>(a: T[]): T[] {\n  for (let i = a.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1))\n    const x = a[i]\n    a[i] = a[j]\n    a[j] = x\n  }\n  return a\n}\n\nfunction cardCompare(a: CardRaw, b: CardRaw): number {\n  if (a.rank !== b.rank) {\n    return a.rank - b.rank\n  }\n\n  return a.suit < b.suit ? -1 : a.suit === b.suit ? 0 : 1\n}\n\nfunction cardEqual(a: CardRaw, b: CardRaw): boolean {\n  return cardCompare(a, b) === 0\n}\n\nfunction sortCards(a: CardRaw[]): CardRaw[] {\n  return a.sort(cardCompare)\n}\n\nexport function generateRandomHands(): CardRaw[] {\n  return sortCards(\n    shuffle([...ALL_CARDS_ONE_DECK, ...ALL_CARDS_ONE_DECK]).slice(0, 27),\n  )\n}\n\nexport function canIAddCard(cards: CardRaw[], cardToAdd: CardRaw): boolean {\n  return cards.filter((card) => cardEqual(card, cardToAdd)).length < 2\n}\n","import React from 'react'\nimport { View, StyleSheet } from 'react-native'\n\nconst styles = StyleSheet.create({\n  divider: {\n    height: 2, // avoid floating error\n    backgroundColor: 'black',\n    marginHorizontal: 10,\n  },\n})\n\nexport function Divider() {\n  return <View style={styles.divider} />\n}\n","import React, { FunctionComponent, ReactNode } from 'react'\nimport {\n  Text,\n  TouchableOpacity,\n  TouchableOpacityProps,\n  StyleProp,\n  TextStyle,\n} from 'react-native'\nimport { theme } from './CardsChooser'\n\ninterface MyButtonProps extends TouchableOpacityProps {\n  title: ReactNode\n  titleStyle?: StyleProp<TextStyle>\n}\n\nexport const MyButton: FunctionComponent<MyButtonProps> = ({\n  style,\n  titleStyle,\n  title,\n  disabled,\n  ...restProps\n}) => (\n  <TouchableOpacity\n    style={[\n      {\n        backgroundColor: disabled\n          ? theme.disabled.background\n          : theme.button.background,\n        borderRadius: 2,\n        paddingVertical: 8,\n        paddingHorizontal: 4,\n        alignItems: 'center',\n        justifyContent: 'center',\n      },\n      style,\n    ]}\n    disabled={disabled}\n    {...restProps}\n  >\n    <Text\n      style={[\n        {\n          color: disabled ? theme.disabled.text : 'white',\n          textAlign: 'center',\n        },\n        titleStyle,\n      ]}\n    >\n      {title}\n    </Text>\n  </TouchableOpacity>\n)\n","import React, { useCallback, useState } from 'react'\nimport {\n  ScrollView,\n  StyleSheet,\n  Text,\n  TouchableOpacity,\n  View,\n} from 'react-native'\nimport { Card, CardDeck } from './Card'\nimport { canIAddCard } from './common/cardUtils'\nimport { CardState } from './common/types'\nimport { Divider } from './Divider'\nimport { MyButton } from './MyButton'\nimport {\n  A,\n  BLACK_JOKER,\n  CardRaw,\n  NaturalRank,\n  NATURAL_RANK_MAX,\n  NATURAL_RANK_MIN,\n  RED_JOKER,\n} from './strategy/models/const'\nimport {\n  AllSuit,\n  SuiteMetadata,\n  SUITS,\n  SUITS_JOKER,\n} from './strategy/models/Suite'\nimport { WindowSize } from './useWindowSize'\n\nconst palette = {\n  blue: 'rgb(33, 150, 243)',\n  grey: {\n    0: 'black',\n    4: 'rgb(161, 161, 161)',\n    6: 'rgb(223, 223, 223)',\n    8: 'white',\n  },\n}\n\nexport const theme = {\n  disabled: {\n    background: palette.grey[6],\n    text: palette.grey[4],\n  },\n  button: {\n    background: palette.blue,\n  },\n}\n\nfunction useRankState() {\n  const { value, increase, decrease } = useIncDecState(A)\n  return {\n    rank: value as NaturalRank,\n    incRank: increase,\n    decRank: decrease,\n  }\n}\n\nfunction useIncDecState(defaultValue = 0) {\n  const [value, setValue] = useState(defaultValue)\n  const increase = useCallback(() => setValue((valueNow) => valueNow + 1), [\n    setValue,\n  ])\n  const decrease = useCallback(() => setValue((valueNow) => valueNow - 1), [\n    setValue,\n  ])\n\n  return {\n    value,\n    increase,\n    decrease,\n  }\n}\n\nconst controlStyles = StyleSheet.create({\n  incDecButton: {\n    flex: 2,\n    minWidth: 80,\n    maxWidth: 200,\n    margin: 6,\n  },\n  actionButton: {\n    flex: 1,\n    minWidth: 80,\n    maxWidth: 150,\n    margin: 6,\n  },\n  buttonTitle: {\n    fontSize: 20,\n  },\n  buttonTitleSmall: {\n    fontSize: 20,\n  },\n})\ninterface ControlPanelProps {\n  decRank: () => void\n  incRank: () => void\n  clearCards: () => void\n  randomCards: () => void\n  deleteLastCard: () => void\n  rank: NaturalRank\n  numberOfCards: number\n}\nconst ControlPanel: React.FunctionComponent<ControlPanelProps> = (props) => (\n  <View>\n    <View\n      style={{\n        flexDirection: 'row',\n        justifyContent: 'center',\n        alignContent: 'center',\n      }}\n    >\n      <MyButton\n        onPress={props.decRank}\n        disabled={props.rank <= NATURAL_RANK_MIN}\n        title=\"<\"\n        style={controlStyles.incDecButton}\n        titleStyle={controlStyles.buttonTitle}\n      />\n      <MyButton\n        onPress={props.incRank}\n        title=\">\"\n        disabled={props.rank >= NATURAL_RANK_MAX}\n        style={controlStyles.incDecButton}\n        titleStyle={controlStyles.buttonTitle}\n      />\n    </View>\n    <View\n      style={{\n        flexDirection: 'row',\n        justifyContent: 'center',\n        alignContent: 'center',\n      }}\n    >\n      <MyButton\n        onPress={props.randomCards}\n        title=\"随机发牌\"\n        disabled={props.numberOfCards > 0}\n        style={controlStyles.actionButton}\n        titleStyle={controlStyles.buttonTitleSmall}\n      />\n      <MyButton\n        onPress={props.clearCards}\n        title=\"清除\"\n        disabled={props.numberOfCards === 0}\n        style={controlStyles.actionButton}\n        titleStyle={controlStyles.buttonTitle}\n      />\n      <MyButton\n        onPress={props.deleteLastCard}\n        title=\"删除\"\n        disabled={props.numberOfCards === 0}\n        style={controlStyles.actionButton}\n        titleStyle={controlStyles.buttonTitle}\n      />\n    </View>\n  </View>\n)\n\ninterface AddCardPanelProps {\n  cards: CardRaw[]\n  addCard: (card: CardRaw) => void\n  rank: NaturalRank\n  large?: boolean\n}\nconst AddCardPanel: React.FunctionComponent<AddCardPanelProps> = (props) => {\n  const suits: SuiteMetadata<AllSuit>[] =\n    props.rank === BLACK_JOKER || props.rank === RED_JOKER ? SUITS_JOKER : SUITS\n\n  return (\n    <>\n      {suits.map((suit: SuiteMetadata<AllSuit>) => {\n        const card = {\n          suit: suit.value,\n          rank: props.rank,\n        } as CardRaw\n        const canIAddThisCard = canIAddCard(props.cards, card)\n\n        return (\n          <TouchableOpacity\n            key={suit.value}\n            onPress={() => props.addCard(card)}\n            disabled={!canIAddThisCard}\n          >\n            <Card\n              suit={suit.value}\n              rank={props.rank}\n              disabled={!canIAddThisCard}\n              style={{ margin: 3 }}\n              large={props.large}\n            />\n          </TouchableOpacity>\n        )\n      })}\n    </>\n  )\n}\n\nexport function CardsChooser({\n  cards,\n  addCard,\n  clearCards,\n  randomCards,\n  deleteLastCard,\n  windowSize,\n}: CardState & {\n  windowSize: WindowSize\n}) {\n  const { rank, incRank, decRank } = useRankState()\n\n  return (\n    <View style={{ flex: 1 }}>\n      <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n        <CardDeck\n          cards={cards}\n          style={{\n            height: 60,\n            padding: 6,\n          }}\n          large={windowSize === 'BIG'}\n        />\n      </View>\n      <Divider />\n      <Text\n        style={{ fontSize: 14, margin: 4 }}\n      >{`点击扑克牌添加，目前已有${cards.length}张牌`}</Text>\n      <ScrollView\n        style={{\n          height: windowSize === 'SMALL' ? 110 : 150,\n          flexGrow: 0,\n        }}\n        contentContainerStyle={{\n          flex: 1,\n          justifyContent: 'center',\n        }}\n        horizontal\n      >\n        <AddCardPanel\n          cards={cards}\n          addCard={addCard}\n          rank={rank}\n          large={windowSize === 'BIG'}\n        />\n      </ScrollView>\n      <ControlPanel\n        numberOfCards={cards.length}\n        clearCards={clearCards}\n        randomCards={randomCards}\n        deleteLastCard={deleteLastCard}\n        rank={rank}\n        incRank={incRank}\n        decRank={decRank}\n      />\n    </View>\n  )\n}\n","import React from 'react'\nimport { View, Text, Picker } from 'react-native'\nimport { RankState } from './common/types'\nimport { SUIT } from './strategy/models/Suite'\nimport {\n  BLACK_JOKER,\n  NaturalRankWithoutJokers,\n  NATURAL_RANK,\n  NATURAL_RANKS_WITHOUT_JOKERS,\n} from './strategy/models/const'\n\nexport function RankChooser({ rank, setRank }: RankState) {\n  return (\n    <View\n      style={{\n        flexDirection: 'row',\n      }}\n    >\n      <Text style={{ fontSize: 22, marginHorizontal: 6 }}>\n        当前打\n        <Picker\n          selectedValue={rank}\n          onValueChange={(itemValue) =>\n            setRank(assertNonJokerNaturalRank(parseInt(itemValue, 10)))\n          }\n        >\n          {NATURAL_RANKS_WITHOUT_JOKERS.map((rank) => (\n            <Picker.Item\n              key={rank}\n              label={NATURAL_RANK[rank].label}\n              value={rank}\n            />\n          ))}\n        </Picker>{' '}\n        <Text style={{ color: SUIT.H.color }}>\n          {SUIT.H.label}\n          {NATURAL_RANK[rank].label}\n        </Text>\n        是百搭\n      </Text>\n    </View>\n  )\n}\n\nfunction assertNonJokerNaturalRank(rank: number): NaturalRankWithoutJokers {\n  if (!Number.isInteger(rank) || rank <= 0 || rank >= BLACK_JOKER) {\n    throw new Error(`rank ${rank} is not valid non-joker natural rank`)\n  }\n  return rank as NaturalRankWithoutJokers\n}\n","import { StyleSheet } from 'react-native';\n\nexport const commonStyles = StyleSheet.create({\n  container: {\n    padding: 10,\n  },\n  borderBox: {\n    borderWidth: 2,\n    borderColor: 'black',\n  },\n});\n","import React, { Fragment, useCallback, useState } from 'react'\nimport { View } from 'react-native'\nimport { CardsChooser } from './CardsChooser'\nimport { AppState, NavigationProps } from './common/types'\nimport { Divider } from './Divider'\nimport { MyButton } from './MyButton'\nimport { RankChooser } from './RankChooser'\nimport { calc } from './strategy/strategy'\nimport { commonStyles } from './styles'\n\ninterface StatelessHomePageProps\n  extends Pick<\n      AppState,\n      | 'rank'\n      | 'setRank'\n      | 'cards'\n      | 'clearCards'\n      | 'addCard'\n      | 'randomCards'\n      | 'deleteLastCard'\n      | 'windowSize'\n    >,\n    Pick<NavigationProps, 'navigation'> {}\nconst HomePage: React.FunctionComponent<StatelessHomePageProps> = ({\n  rank,\n  setRank,\n  cards,\n  clearCards,\n  addCard,\n  randomCards,\n  deleteLastCard,\n  navigation,\n  windowSize,\n}) => {\n  const handleSolutionCalcButton = useCallback(() => {\n    navigation.navigate('Result')\n  }, [])\n\n  return (\n    <Fragment>\n      <View\n        style={[\n          commonStyles.container,\n          {\n            flexDirection: 'row',\n            height: 40,\n            justifyContent: 'center',\n            alignItems: 'center',\n          },\n        ]}\n      >\n        <RankChooser rank={rank} setRank={setRank} />\n      </View>\n      <Divider />\n      <View\n        style={{\n          flex: 1,\n        }}\n      >\n        <CardsChooser\n          cards={cards}\n          addCard={addCard}\n          clearCards={clearCards}\n          randomCards={randomCards}\n          deleteLastCard={deleteLastCard}\n          windowSize={windowSize}\n        />\n      </View>\n      <View\n        style={[\n          commonStyles.container,\n          {\n            justifyContent: 'center',\n            padding: 6,\n          },\n        ]}\n      >\n        {(() => {\n          return (\n            <MyButton\n              title={'开始拆牌'}\n              onPress={handleSolutionCalcButton}\n              style={{\n                height: 60,\n              }}\n              titleStyle={{\n                fontSize: 28,\n              }}\n            />\n          )\n        })()}\n      </View>\n    </Fragment>\n  )\n}\n\nconst MemoedHomePage = React.memo(HomePage)\n\nfunction HomePageWrapper({ screenProps, navigation }: NavigationProps) {\n  return <MemoedHomePage {...screenProps} navigation={navigation} />\n}\n\nexport default HomePageWrapper\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0V0z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\"\n});\n\nfunction SvgClose(_ref, svgRef) {\n  let title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgClose);\nexport default __webpack_public_path__ + \"static/media/close.2c0e4ee3.svg\";\nexport { ForwardRef as ReactComponent };","import { GameContext } from './GameContext'\nimport { NaturalRank, PowerRank } from './const'\n\nexport interface Rank {\n  natural: NaturalRank\n  power: PowerRank\n}\n\nexport function makeRank({\n  natural,\n  context,\n}: {\n  natural: NaturalRank\n  context: GameContext\n}): Rank {\n  return {\n    natural: natural,\n    power: context.getOrder(natural),\n  }\n}\n","import { CardRaw, CardRawLoose, NATURAL_RANK } from './const'\nimport { GameContext } from './GameContext'\nimport { makeRank, Rank } from './Rank'\nimport { AllSuit, SUIT } from './Suite'\n\nexport type Card = {\n  rank: Rank\n  suit: AllSuit\n}\n\nexport function parseCardRaw(raw: CardRaw, context: GameContext): Card {\n  return {\n    rank: makeRank({ natural: raw.rank, context }),\n    suit: raw.suit,\n  }\n}\n\nexport function cardToText(card: Card): string {\n  return SUIT[card.suit].text + NATURAL_RANK[card.rank.natural].text\n}\n\nexport function cardRawToText(card: CardRaw): string {\n  return SUIT[card.suit].text + NATURAL_RANK[card.rank].text\n}\n\nexport function cardToCardRaw(card: Card): CardRaw {\n  const loose: CardRawLoose = {\n    rank: card.rank.natural,\n    suit: card.suit,\n  }\n  return loose as CardRaw\n}\n","import React, { memo } from 'react'\nimport {\n  View,\n  Text,\n  ScrollView,\n  TouchableOpacity,\n  StyleProp,\n  ViewStyle,\n} from 'react-native'\nimport { Divider } from './Divider'\nimport { CardDeck } from './Card'\nimport { commonStyles } from './styles'\nimport { StrategyResult } from './useResultState'\nimport { ReactComponent as Close } from './icons/close.svg'\nimport { ReactComponent as Info } from './icons/info.svg'\nimport { WindowSize } from './useWindowSize'\nimport { NaturalRankWithoutJokers } from './strategy/models/const'\nimport { cardToCardRaw } from './strategy/models/Card'\n\ninterface SolutionVisualizationProps {\n  strategyResult: StrategyResult[]\n  rank: NaturalRankWithoutJokers\n  windowSize: WindowSize\n  onClose: () => void\n}\n\ninterface WindowSizeToggleProps {\n  onClose: () => void\n  style: StyleProp<ViewStyle>\n}\nconst CloseWindowButton: React.FunctionComponent<WindowSizeToggleProps> = (\n  props,\n) => (\n  <TouchableOpacity\n    style={[\n      {\n        width: 40,\n        flexDirection: 'row',\n        justifyContent: 'center',\n        alignItems: 'center',\n      },\n      props.style,\n    ]}\n    onPress={props.onClose}\n  >\n    <Close />\n  </TouchableOpacity>\n)\n\nconst MAX_SOLUTIONS = 5\n\ninterface SolutionViewProps {\n  rank: NaturalRankWithoutJokers\n  strategyResult: StrategyResult\n  windowSize: WindowSize\n}\nconst SolutionView: React.FunctionComponent<SolutionViewProps> = ({\n  strategyResult,\n  rank,\n  windowSize,\n}) => (\n  <>\n    {strategyResult &&\n      (strategyResult === 'loading' ? (\n        <Text\n          style={{\n            fontSize: 20,\n          }}\n        >\n          计算中\n        </Text>\n      ) : (\n        <>\n          <View\n            style={{\n              flexDirection: 'row',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n            }}\n          >\n            <Text\n              style={{ fontSize: 18, flexShrink: 0, marginRight: 20 }}\n            >{`分数${strategyResult.plans[0].score}`}</Text>\n          </View>\n          <View>\n            {(() => {\n              const solutionsCount = strategyResult.plans.length\n              const hiddenMoreSolutions = solutionsCount - MAX_SOLUTIONS\n              return (\n                <>\n                  {strategyResult.plans\n                    .slice(0, MAX_SOLUTIONS)\n                    .map((plan, planIndex) => (\n                      <CardDeck\n                        key={planIndex}\n                        hands={plan.plays.map((play) =>\n                          play.cards.map(cardToCardRaw),\n                        )}\n                        style={{\n                          margin: 6,\n                        }}\n                        large={windowSize === 'BIG'}\n                      />\n                    ))}\n                  {hiddenMoreSolutions > 0 &&\n                    `还有${hiddenMoreSolutions}种方案`}\n                </>\n              )\n            })()}\n          </View>\n        </>\n      ))}\n  </>\n)\nconst MemoedSolutionView = memo(SolutionView)\n\nconst SolutionVisualization: React.FunctionComponent<SolutionVisualizationProps> = ({\n  strategyResult,\n  rank,\n  onClose,\n  windowSize,\n}) => (\n  <>\n    <View\n      style={{\n        flexDirection: 'row',\n        justifyContent: 'flex-end',\n        alignContent: 'center',\n      }}\n    >\n      <View style={{ flex: 1 }}>\n        <Text\n          style={{\n            fontSize: 20,\n            padding: 4,\n            textAlign: 'center',\n          }}\n        >\n          拆牌策略计算结果\n        </Text>\n      </View>\n      {/* <View style={{ width: 2, backgroundColor: 'black' }} /> */}\n      <CloseWindowButton\n        onClose={onClose}\n        style={{\n          // to the right and centered\n          position: 'absolute',\n          right: 0,\n          height: '100%',\n        }}\n      />\n    </View>\n    <Divider />\n    <ScrollView\n      style={[\n        commonStyles.container,\n        {\n          flex: 2,\n        },\n      ]}\n    >\n      {strategyResult.map((result) => (\n        <MemoedSolutionView\n          strategyResult={result}\n          rank={rank}\n          windowSize={windowSize}\n        />\n      ))}\n    </ScrollView>\n  </>\n)\n\nexport default React.memo(SolutionVisualization)\n","export const DEBUG = false\nexport const MAX_PLANS = 10000000\n","import { Card, cardToText } from './Card'\nimport { NaturalRank, PowerRank } from './const'\n\nexport enum PlayType {\n  UNKNOWN = 0,\n  SINGLE,\n  PAIR,\n  TRIPLE,\n  FULL_HOUSE, // like 555,22\n  STRAIGHT, // like 12345\n  TUBE, // like 33,44,55\n  PLATE, // like 333,444\n  // === The following is a bomb ===\n  STRAIGHT_FLUSH, // like 34567 all hearts\n  BOMB_N_TUPLE, // like 4444, 55555, 88888888\n  FOUR_JOKER,\n}\n\nexport type PlayRankBombNTuple = {\n  type: PlayType.BOMB_N_TUPLE\n  rank: PowerRank\n  cardCount: number\n}\n\nexport type PlayRankFourJoker = {\n  type: PlayType.FOUR_JOKER\n}\n\nexport type PlayRankNormal = {\n  type: PlayType.FULL_HOUSE | PlayType.PAIR | PlayType.SINGLE | PlayType.TRIPLE\n  rank: PowerRank\n}\n\nexport type PlayRankNatural = {\n  type:\n    | PlayType.STRAIGHT_FLUSH\n    | PlayType.STRAIGHT\n    | PlayType.TUBE\n    | PlayType.PLATE\n  rank: NaturalRank\n}\n\nexport type PlayRank =\n  | PlayRankNormal\n  | PlayRankNatural\n  | PlayRankBombNTuple\n  | PlayRankFourJoker\n\nexport type Play = {\n  playRank: PlayRank\n  cards: Card[]\n}\n\nexport function playToText(play: Play): string {\n  return play.cards.map(cardToText).join('')\n}\n","import { DEBUG } from './const'\nimport { Card } from './models/Card'\nimport { A, K, NaturalRank, nextRank } from './models/const'\nimport { GameContext } from './models/GameContext'\nimport { Plan } from './models/Plan'\nimport {\n  Play,\n  PlayRankBombNTuple,\n  PlayRankNormal,\n  PlayType,\n} from './models/Play'\nimport { getNextSuit, Suit, SUIT_START } from './models/Suite'\n\nconst NEXT_PLAY_TYPE: { [T in PlayType]?: PlayType } = {\n  [PlayType.STRAIGHT_FLUSH]: PlayType.BOMB_N_TUPLE,\n  [PlayType.BOMB_N_TUPLE]: PlayType.PLATE,\n  [PlayType.PLATE]: PlayType.TUBE,\n  [PlayType.TUBE]: PlayType.STRAIGHT,\n  [PlayType.STRAIGHT]: PlayType.PAIR,\n  [PlayType.PAIR]: PlayType.TRIPLE,\n  [PlayType.TRIPLE]: undefined,\n} as const\nfunction nextPlayType(playType: PlayType): PlayType | undefined {\n  return NEXT_PLAY_TYPE[playType]\n}\ntype IteratorState = {\n  rank: NaturalRank\n  suit?: Suit\n  type: PlayType\n}\nexport const ITERATOR_STATE_START: IteratorState = {\n  rank: A,\n  suit: SUIT_START,\n  type: PlayType.STRAIGHT_FLUSH,\n}\nexport function nextIteratorState(\n  now: IteratorState,\n): IteratorState | undefined {\n  const next = nextRank(now.rank)\n  if (next != null) {\n    return {\n      ...now,\n      rank: next,\n    }\n  }\n  if (now.suit) {\n    console.assert(now.type === PlayType.STRAIGHT_FLUSH)\n    const nextSuit = getNextSuit(now.suit)\n    if (nextSuit != null) {\n      return {\n        ...now,\n        rank: A,\n        suit: nextSuit,\n      }\n    }\n  }\n  // next == null\n  const nextType = nextPlayType(now.type)\n  if (nextType != null) {\n    // Iterate the next type, and restart rank.\n    return {\n      ...now,\n      rank: A, // restart\n      type: nextType,\n      suit: undefined, // STRAIGHT_FLUSH is the only type with suit, so next type won't have suit\n    }\n  }\n  // nextType == null\n  return undefined\n}\n\nexport type PlanCollector = (plan: Plan) => void\n\nexport function iteratePlans({\n  cards,\n  collectPlan,\n  context: gameContext,\n}: {\n  cards: Card[]\n  collectPlan: PlanCollector\n  context: GameContext\n}) {\n  const cardsByRank = organize(cards, gameContext)\n  iterateImp({\n    cardsByRank,\n    context: {\n      collectPlan,\n      game: gameContext,\n      debug: DEBUG,\n    },\n  })\n}\n\ntype RankWildCard = 0\nconst WILD_CARD: RankWildCard = 0\ntype CardsByRank = { [R in NaturalRank | RankWildCard]?: Card[] }\nfunction organize(cards: Card[], context: GameContext): CardsByRank {\n  const organized: CardsByRank = {}\n  cards.forEach((card) => {\n    const rank = context.isWildCard(card) ? WILD_CARD : card.rank.natural\n    organized[rank] = organized[rank] || []\n    organized[rank]!.push(card)\n  })\n  return organized\n}\nexport const TEST_ONLY = { organize }\nfunction takeCard(\n  cards: CardsByRank, // Warning: this will mutate cards.\n  rank: NaturalRank,\n  count: number = 1,\n): Card[] | undefined {\n  console.assert(count >= 1)\n  const rankCards = cards[rank] || []\n  if (count <= rankCards.length) {\n    const taken = rankCards.slice(0, count)\n    cards[rank] = rankCards.slice(count)\n    return taken\n  }\n  const wildCards = cards[WILD_CARD]\n  const wildCardsNeeded = count - rankCards.length\n  if (!wildCards || wildCardsNeeded > wildCards.length) {\n    return undefined\n  }\n  const taken = rankCards.concat(wildCards.slice(0, wildCardsNeeded))\n  cards[rank] = []\n  cards[WILD_CARD] = wildCards.slice(wildCardsNeeded)\n  return taken\n}\nfunction takeCardBySuit(\n  cardsByRank: CardsByRank,\n  rank: NaturalRank,\n  suit: Suit,\n): Card | undefined {\n  const rankCards = cardsByRank[rank] || []\n  const index = rankCards.findIndex((card) => card.suit === suit)\n  if (index >= 0) {\n    cardsByRank[rank] = [...rankCards] // splice modifies the array, so copy it first\n    cardsByRank[rank]!.splice(index, 1)\n    return rankCards[index]\n  }\n  const wildCards = cardsByRank[WILD_CARD] || []\n  if (wildCards.length > 0) {\n    cardsByRank[WILD_CARD] = wildCards.slice(1)\n    return wildCards[0]\n  }\n  // not found\n  return undefined\n}\n\ntype IteratorContext = {\n  game: GameContext\n  collectPlan: PlanCollector\n  debug?: boolean\n}\n\ntype PlayTypeFunc = (args: {\n  cards: CardsByRank\n  nowRank: NaturalRank\n  nowSuit?: Suit\n  plan: Plan\n  context: IteratorContext\n}) => { cardsByRank: CardsByRank; plan: Plan } | undefined\nconst playCardsOfTheSameRank = (n: number): PlayTypeFunc => ({\n  cards,\n  nowRank,\n  plan,\n  context,\n}) => {\n  const newCards = { ...cards }\n  const taken = takeCard(newCards, nowRank, n)\n  if (taken == null) {\n    return undefined\n  }\n  const playRank: PlayRankBombNTuple | PlayRankNormal = {\n    type:\n      n === 2\n        ? PlayType.PAIR\n        : n === 3\n        ? PlayType.TRIPLE\n        : PlayType.BOMB_N_TUPLE,\n    rank: context.game.getOrder(nowRank),\n    cardCount: n,\n  }\n  return {\n    cardsByRank: newCards,\n    plan: {\n      score: plan.score + (n > 3 ? /* Bomb is free to play. */ 0 : 1),\n      plays: plan.plays.concat({\n        playRank,\n        cards: taken,\n      }),\n    },\n  }\n}\nconst playCardSequence = ({\n  cardCount,\n  length,\n  playType,\n}: {\n  cardCount: number\n  length: number\n  playType: PlayType.TUBE | PlayType.STRAIGHT | PlayType.PLATE\n}): PlayTypeFunc => ({ cards: cardsByRank, nowRank, plan, context }) => {\n  if (context.debug) {\n    console.log(`playCardSequence: ${JSON.stringify(cardsByRank)}, ${nowRank}`)\n  }\n  const end = nowRank + length - 1\n  if (end > K + 1) {\n    // This sequence is not possible, because it cannot go past A.\n    return undefined\n  }\n  let newCardsByRank = { ...cardsByRank }\n  let play: Play = {\n    cards: [],\n    playRank: { type: playType, rank: nowRank },\n  }\n  for (let i = nowRank; i <= end; ++i) {\n    const ii = i == K + 1 ? A : i\n    const taken = takeCard(newCardsByRank, ii, cardCount)\n    if (taken == null) {\n      return undefined\n    }\n    play.cards.push(...taken)\n  }\n  return {\n    cardsByRank: newCardsByRank,\n    plan: {\n      score: plan.score + 1,\n      plays: plan.plays.concat(play),\n    },\n  }\n}\nconst playStraightFlush: PlayTypeFunc = ({\n  cards: cardsByRank,\n  nowRank,\n  nowSuit,\n  plan,\n  context,\n}) => {\n  if (context.debug) {\n    console.log(\n      `playStraightFlush: ${JSON.stringify(\n        cardsByRank,\n      )}, ${nowRank}, ${nowSuit}`,\n    )\n  }\n  if (!nowSuit) {\n    // playStraightFlush should always be called with suit\n    console.assert(nowSuit)\n    return undefined\n  }\n  const end = nowRank + 5 - 1\n  if (end > K + 1) {\n    // This sequence is not possible, because it cannot go past A.\n    return undefined\n  }\n  let newCardsByRank = { ...cardsByRank }\n  let play: Play = {\n    cards: [],\n    playRank: { type: PlayType.STRAIGHT_FLUSH, rank: nowRank },\n  }\n  for (let i = nowRank; i <= end; ++i) {\n    const ii = i == K + 1 ? A : i\n    const taken = takeCardBySuit(newCardsByRank, ii, nowSuit)\n    if (taken == null) {\n      // not found\n      return undefined\n    }\n    play.cards.push(taken)\n  }\n  return {\n    cardsByRank: newCardsByRank,\n    plan: {\n      score: plan.score + 0, // straight flush is a bomb\n      plays: plan.plays.concat(play),\n    },\n  }\n}\nconst playPair = playCardsOfTheSameRank(2)\nconst playTriple = playCardsOfTheSameRank(3)\nconst playBomb4 = playCardsOfTheSameRank(4)\nconst playBomb5 = playCardsOfTheSameRank(5)\nconst playBomb6 = playCardsOfTheSameRank(6)\nconst playBomb7 = playCardsOfTheSameRank(7)\nconst playBomb8 = playCardsOfTheSameRank(8)\nconst playFullHouse: PlayTypeFunc = ({ cards, nowRank, plan, context }) => {\n  const result = playTriple({ cards, nowRank, plan, context })\n  if (result == null) {\n    return undefined\n  }\n  const { cardsByRank: newCards, plan: newPlan } = result\n  const pairIndex = newPlan.plays.findIndex(\n    (play) => play.playRank.type === PlayType.PAIR,\n  )\n  if (pairIndex < 0) {\n    // No pairs left, cannot make a full house.\n    return undefined\n  }\n  const triplePlay = newPlan.plays[newPlan.plays.length - 1] as Play\n  const pairPlay = newPlan.plays[pairIndex]\n  // Remove pair and triple.\n  newPlan.plays = newPlan.plays\n    .slice(0, pairIndex)\n    .concat(newPlan.plays.slice(pairIndex + 1, newPlan.plays.length - 1))\n  // Push a full house.\n  newPlan.plays.push({\n    playRank: {\n      type: PlayType.FULL_HOUSE,\n      rank: (triplePlay.playRank as PlayRankNormal).rank,\n    },\n    cards: triplePlay.cards.concat(pairPlay.cards),\n  })\n  // Pair and triple becomes a full house, one fewer hand to play.\n  newPlan.score = newPlan.score - 1\n  return { plan: newPlan, cardsByRank: newCards }\n}\nexport const playStraight = playCardSequence({\n  cardCount: 1,\n  length: 5,\n  playType: PlayType.STRAIGHT,\n})\nconst playTube = playCardSequence({\n  cardCount: 2,\n  length: 3,\n  playType: PlayType.TUBE,\n})\nconst playPlate = playCardSequence({\n  cardCount: 3,\n  length: 2,\n  playType: PlayType.PLATE,\n})\nconst PLAY_TYPE_FUNC: { [T in PlayType]?: readonly PlayTypeFunc[] } = {\n  [PlayType.PAIR]: [playPair],\n  [PlayType.TRIPLE]: [playTriple, playFullHouse],\n  [PlayType.BOMB_N_TUPLE]: [\n    playBomb4,\n    playBomb5,\n    playBomb6,\n    playBomb7,\n    playBomb8,\n  ],\n  [PlayType.STRAIGHT]: [playStraight],\n  [PlayType.TUBE]: [playTube],\n  [PlayType.PLATE]: [playPlate],\n  [PlayType.STRAIGHT_FLUSH]: [playStraightFlush],\n} as const\n\nfunction iterateImp({\n  cardsByRank,\n  plan = { score: 0, plays: [] },\n  now = ITERATOR_STATE_START,\n  context,\n}: {\n  cardsByRank: CardsByRank\n  plan?: Plan\n  now?: IteratorState\n  context: IteratorContext\n}) {\n  if (context.debug) {\n    console.log(PlayType[now.type], now.rank, now.suit)\n  }\n  PLAY_TYPE_FUNC[now.type]?.forEach((func) => {\n    const result = func({\n      nowRank: now.rank,\n      nowSuit: now.suit,\n      cards: cardsByRank,\n      plan,\n      context,\n    })\n    if (result == null) {\n      return\n    }\n    iterateImp({ ...result, now, context })\n  })\n  const next = nextIteratorState(now)\n  if (next == null) {\n    // When we reach the last iterator state, the plan is ready to collect.\n    context.collectPlan(playRestOfCardsAsSingles(plan, cardsByRank))\n    return\n  }\n  // next != null\n  iterateImp({\n    now: next,\n    cardsByRank,\n    plan,\n    context,\n  })\n}\n\nfunction playRestOfCardsAsSingles(plan: Plan, cardsByRank: CardsByRank): Plan {\n  const resultPlan = { ...plan, plays: [...plan.plays] }\n  Object.entries(cardsByRank).forEach(([_, cards]) => {\n    if (!cards) {\n      return\n    }\n    resultPlan.score += cards.length\n    cards.forEach((card) => {\n      resultPlan.plays.push({\n        playRank: {\n          type: PlayType.SINGLE,\n          rank: card.rank.power,\n        },\n        cards: [card],\n      })\n    })\n  })\n  return resultPlan\n}\n","import {\n  NaturalRank,\n  PowerRank,\n  RED_JOKER,\n  BLACK_JOKER,\n  A,\n} from './models/const'\n\nexport function getUsualPowerRank(rank: NaturalRank): PowerRank {\n  switch (rank) {\n    case RED_JOKER:\n      return 14\n    case BLACK_JOKER:\n      return 13\n    case A:\n      return 12\n    default:\n      return (rank - 2) as PowerRank\n  }\n}\n","import { getUsualPowerRank } from '../utils'\nimport { Card } from './Card'\nimport {\n  BLACK_JOKER,\n  NaturalRank,\n  NaturalRankWithoutJokers,\n  PowerRank,\n  RED_JOKER,\n} from './const'\n\nexport class GameContext {\n  constructor(mainRank: NaturalRankWithoutJokers) {\n    this.mainRank = mainRank\n  }\n  /** Which rank is largest in current game play. */\n  readonly mainRank: NaturalRankWithoutJokers\n  /**\n   * Returns range[0, 14], power of the rank in this gameplay.\n   * The weakest is 0. The strongest (red joker) is 14.\n   */\n  getOrder(rank: NaturalRank): PowerRank {\n    if (rank == RED_JOKER) {\n      return 14\n    } else if (rank == BLACK_JOKER) {\n      return 13\n    } else if (rank == this.mainRank) {\n      return 12\n    } else {\n      const usualRank = getUsualPowerRank(rank)\n      const mainRankUsualRank = getUsualPowerRank(this.mainRank)\n      if (usualRank > mainRankUsualRank) {\n        return (usualRank - 1) as PowerRank\n      } else {\n        return usualRank as PowerRank\n      }\n    }\n  }\n\n  isWildCard(card: Card): boolean {\n    return card.rank.natural === this.mainRank && card.suit === 'H'\n  }\n}\n","import { A, K, Q } from './models/const'\nimport { Plan } from './models/Plan'\nimport { Play, PlayType } from './models/Play'\n\n// returns score, the smaller the better\nexport type Scorer = (plan: Plan) => number\nexport const handsScore: Scorer = (plan) => plan.score\nexport const MAX_SCORE = 1e100\n\nexport const heuristicScore: Scorer = (plan) => {\n  const scoreByPlayType: Partial<Record<PlayType, number>> = {}\n  plan.plays.forEach((play) => {\n    scoreByPlayType[play.playRank.type] =\n      scoreByPlayType[play.playRank.type] || 0\n    scoreByPlayType[play.playRank.type]! += heuristicScorePlay(play)\n  })\n  scoreByPlayType[PlayType.SINGLE] = cap(\n    scoreByPlayType[PlayType.SINGLE],\n    -3,\n    MAX_SCORE,\n  )\n  scoreByPlayType[PlayType.PAIR] = cap(scoreByPlayType[PlayType.PAIR], -2, 6)\n  scoreByPlayType[PlayType.TRIPLE] = cap(\n    scoreByPlayType[PlayType.TRIPLE],\n    -0.3,\n    6,\n  )\n  scoreByPlayType[PlayType.FULL_HOUSE] = cap(\n    scoreByPlayType[PlayType.FULL_HOUSE],\n    -1.3,\n    3,\n  )\n  scoreByPlayType[PlayType.STRAIGHT] = cap(\n    scoreByPlayType[PlayType.STRAIGHT],\n    -0.8,\n    1.5,\n  )\n  scoreByPlayType[PlayType.TUBE] = cap(scoreByPlayType[PlayType.TUBE], -0.3, 1)\n  scoreByPlayType[PlayType.PLATE] = cap(\n    scoreByPlayType[PlayType.PLATE],\n    -0.2,\n    0.3,\n  )\n  return (\n    Object.values(scoreByPlayType).reduce(\n      (sum, value) => (sum || 0) + (value || 0),\n    ) || 0\n  )\n}\n\nfunction heuristicScorePlay(play: Play) {\n  const playRank = play.playRank\n  switch (playRank.type) {\n    case PlayType.SINGLE:\n      switch (playRank.rank) {\n        case 14: // Red Joker\n          return -1\n        case 13: // Black Joker\n          return -0.8\n        default:\n          return linear({ x: 0, y: 1 }, { x: 12, y: -0.2 }, playRank.rank)\n      }\n    case PlayType.PAIR:\n      switch (playRank.rank) {\n        case 14: // Red Joker\n          return -1\n        case 13: // Black Joker\n          return -0.95\n        default:\n          // powerRank == 9 means J when A is main.\n          if (playRank.rank >= 9) {\n            return linear({ x: 9, y: 0 }, { x: 12, y: -0.9 }, playRank.rank)\n          } else {\n            return linear({ x: 9, y: 0 }, { x: 0, y: 1 }, playRank.rank)\n          }\n      }\n    case PlayType.TRIPLE:\n      if (playRank.rank >= 9) {\n        return linear({ x: 9, y: 0 }, { x: 12, y: -1 }, playRank.rank)\n      } else {\n        return linear({ x: 9, y: 0 }, { x: 0, y: 1 }, playRank.rank)\n      }\n    case PlayType.FULL_HOUSE:\n      if (playRank.rank >= 8) {\n        return linear({ x: 8, y: 0 }, { x: 12, y: -1 }, playRank.rank)\n      } else {\n        return linear({ x: 8, y: 0 }, { x: 0, y: 1 }, playRank.rank)\n      }\n    case PlayType.STRAIGHT:\n      if (playRank.rank >= 7) {\n        return linear({ x: 7, y: 0 }, { x: 10, y: -1 }, playRank.rank)\n      } else {\n        return linear({ x: 7, y: 0 }, { x: A, y: 0.8 }, playRank.rank)\n      }\n    case PlayType.TUBE:\n      if (playRank.rank >= 8) {\n        return linear({ x: 8, y: 0 }, { x: Q, y: -1 }, playRank.rank)\n      } else {\n        return linear({ x: 8, y: 0 }, { x: A, y: 0.5 }, playRank.rank)\n      }\n    case PlayType.PLATE:\n      if (playRank.rank >= 6) {\n        return linear({ x: 6, y: 0 }, { x: K, y: -1 }, playRank.rank)\n      } else {\n        return linear({ x: 6, y: 0 }, { x: A, y: 0.3 }, playRank.rank)\n      }\n    case PlayType.STRAIGHT_FLUSH:\n    case PlayType.BOMB_N_TUPLE:\n    case PlayType.FOUR_JOKER:\n      return -1\n    default:\n      throw new Error('Unknown play rank type')\n  }\n}\n\n// There's a straight line connecting start point and end point.\n// Returns the y value of queried x value.\nfunction linear(\n  start: { x: number; y: number },\n  end: { x: number; y: number },\n  x: number,\n) {\n  return ((end.y - start.y) / (end.x - start.x)) * (x - start.x) + start.y\n}\n\nfunction cap(x: number | undefined, min: number, max: number) {\n  if (x == null) {\n    return 0\n  }\n  if (x < min) {\n    return min\n  }\n  if (x > max) {\n    return max\n  }\n  return x\n}\n","import { MAX_PLANS } from './const'\nimport { iteratePlans } from './iterate'\nimport { parseCardRaw } from './models/Card'\nimport { CardRaw, NaturalRankWithoutJokers } from './models/const'\nimport { GameContext } from './models/GameContext'\nimport { Plan } from './models/Plan'\nimport { handsScore, heuristicScore, MAX_SCORE, Scorer } from './scorers'\n\nexport type Scorers = 'HANDS' | 'HEURISTICS'\n\nexport function calc({\n  cards: rawCards,\n  mainRank,\n  morePlans = true,\n  scorer = 'HANDS',\n}: {\n  cards: CardRaw[]\n  mainRank: NaturalRankWithoutJokers\n  morePlans?: boolean // not only return the best plan\n  scorer?: Scorers\n}): Plan[] {\n  const context = new GameContext(mainRank)\n  const cards = rawCards.map((rawCard) => parseCardRaw(rawCard, context))\n  const scorerFunc = scorer === 'HEURISTICS' ? heuristicScore : handsScore\n  if (morePlans) {\n    const planCollector = makeAllBestPlansCollector({ scorer: scorerFunc })\n    iteratePlans({ cards, collectPlan: planCollector.collectPlan, context })\n    const bestPlans = planCollector.getBestPlans()\n    if (bestPlans.length == 0) {\n      throw new Error('No plan found')\n    }\n    return bestPlans\n  } else {\n    const bestPlanCollector = makeBestPlanCollector({ scorer: scorerFunc })\n    iteratePlans({ cards, collectPlan: bestPlanCollector.collectPlan, context })\n    const bestPlan = bestPlanCollector.getBestPlan()\n    if (bestPlan == null) {\n      throw new Error('No plan found')\n    }\n    return [bestPlan]\n  }\n}\n\nconst makeBestPlanCollector = ({\n  scorer = handsScore,\n}: { scorer?: Scorer } = {}) => {\n  let bestPlan: Plan | undefined = undefined\n  let bestScore: number = MAX_SCORE\n  let count = 0\n  return {\n    collectPlan: (plan: Plan) => {\n      const currentScore = scorer(plan)\n      plan.score = currentScore\n      if (bestPlan == null || currentScore <= bestScore) {\n        bestPlan = plan\n        bestScore = currentScore\n      }\n      ++count\n      if (count > MAX_PLANS) {\n        throw new Error('too many plans')\n      }\n    },\n    getBestPlan: () => bestPlan,\n  }\n}\n\nconst makeAllBestPlansCollector = ({\n  scorer = handsScore,\n}: { scorer?: Scorer } = {}) => {\n  let bestPlans: Plan[] = []\n  let bestScore: number = MAX_SCORE\n  let count = 0\n  return {\n    collectPlan: (plan: Plan) => {\n      ++count\n      if (count > MAX_PLANS) {\n        throw new Error('too many plans')\n      }\n      const currentScore = scorer(plan)\n      plan.score = currentScore\n      if (bestPlans.length === 0) {\n        bestPlans.push(plan)\n        bestScore = currentScore\n      } else if (currentScore < bestScore) {\n        bestPlans = [plan]\n        bestScore = currentScore\n      } else if (currentScore === bestScore) {\n        bestPlans.push(plan)\n      } else {\n        // ignore non-best plans\n      }\n    },\n    getBestPlans: () => bestPlans,\n  }\n}\n","import React, { useEffect, useState } from 'react'\nimport { useQuery } from 'react-query'\nimport { NavigationProps } from './common/types'\nimport SolutionVisualization from './SolutionVisualization'\nimport { calc } from './strategy/strategy'\nimport { StrategyResult } from './useResultState'\n\nfunction ResultPage({ screenProps, navigation }: NavigationProps) {\n  const { rank, cards, windowSize } = screenProps\n  const args1 = {\n    cards,\n    mainRank: rank,\n    morePlans: true,\n    scorer: 'HEURISTICS' as const,\n  }\n  const { status: status1, data: plans1 } = useQuery(\n    ['calc', args1],\n    async () => {\n      await delay(500)\n      return calc(args1)\n    },\n  )\n  const args2 = {\n    cards,\n    mainRank: rank,\n    morePlans: true,\n    scorer: 'HANDS' as const,\n  }\n  const { status: status2, data: plans2 } = useQuery(\n    ['calc', args2],\n    async () => {\n      await delay(0)\n      return calc(args2)\n    },\n    { enabled: status1 == 'success' },\n  )\n  let strategyResult: StrategyResult[] = ['loading']\n  // TODO: handle error?\n  if (status1 == 'success') {\n    strategyResult = [{ title: '价值策略', plans: plans1! }]\n    if (status2 == 'loading') {\n      strategyResult.push('loading' as const)\n    } else if (status2 == 'success') {\n      strategyResult.push({ title: '手数策略', plans: plans2! })\n    }\n  }\n\n  return (\n    <SolutionVisualization\n      strategyResult={strategyResult}\n      rank={rank}\n      windowSize={windowSize}\n      onClose={navigation.goBack}\n    />\n  )\n}\nexport default ResultPage\n\nfunction delay(millis: number) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, millis)\n  })\n}\n","import { useState, useMemo, useEffect, useCallback } from 'react'\nimport { History } from 'history'\n\n// using internal state\nexport function useRouterState(defaultRoute: string) {\n  const [route, navigate] = useState(defaultRoute)\n  const navigation = useMemo(\n    () => ({\n      navigate,\n    }),\n    [navigate],\n  )\n  return {\n    route,\n    navigation,\n  }\n}\n\ninterface RouteConfig {\n  path: string\n  title: string\n}\n\ninterface RoutesConfig {\n  base: string\n  defaultRoute: string\n  routes: {\n    [route: string]: RouteConfig\n  }\n}\n\nexport const NOT_FOUND = 'NOT_FOUND'\nconst NOT_FOUND_CONFIG: RouteConfig = {\n  path: '/not-found',\n  title: 'Page Not Found',\n}\n\n// remove ending /\nfunction normalizePath(path: string) {\n  if (path.endsWith('/')) {\n    return path.substring(0, path.length - 1)\n  }\n\n  return path\n}\n\nexport function createBrowserRouterHook(\n  providedRoutesConfig: RoutesConfig,\n  history: History,\n) {\n  const routesConfig: RoutesConfig = {\n    ...providedRoutesConfig,\n    routes: { ...providedRoutesConfig.routes, [NOT_FOUND]: NOT_FOUND_CONFIG },\n  }\n  function getCurrentPath() {\n    const pathNowRaw = history.location.pathname\n    if (pathNowRaw.startsWith(routesConfig.base)) {\n      return normalizePath(pathNowRaw.substring(routesConfig.base.length))\n    }\n\n    return routesConfig.base + NOT_FOUND_CONFIG.path\n  }\n  function match(pathname: string) {\n    const [route, routeConfig] = Object.entries(routesConfig.routes).find(\n      ([_, routeConfig]) => routeConfig.path === pathname,\n    ) || [NOT_FOUND, NOT_FOUND_CONFIG]\n\n    return {\n      route,\n      routeConfig,\n    }\n  }\n\n  return function useBrowserRouterState() {\n    const [route, setRoute] = useState(match(getCurrentPath()).route)\n\n    useEffect(() => {\n      function historyEventHandler(location: any, action: any) {\n        // console.log(location)\n        // console.log(action)\n        // console.log(getCurrentPath())\n        // console.log(match(getCurrentPath()))\n        setRoute(match(getCurrentPath()).route)\n      }\n\n      // listen for all incoming navigations, returns function to unlisten the event handler\n      return history.listen(historyEventHandler)\n    }, [setRoute])\n\n    useEffect(() => {\n      window.document.title = routesConfig.routes[route].title\n    }, [])\n\n    // dispatch navigation action\n    const navigate = useCallback(\n      (routeToDispatch, { replace = false } = {}) => {\n        // check validity of the route, if not found, go to the NOT_FOUND page\n        routeToDispatch = routesConfig.routes[routeToDispatch]\n          ? routeToDispatch\n          : NOT_FOUND\n        const routeMatched = routesConfig.routes[routeToDispatch]\n\n        if (replace) {\n          history.replace(routesConfig.base + routeMatched.path)\n        } else {\n          history.push(routesConfig.base + routeMatched.path)\n        }\n      },\n      [routesConfig, NOT_FOUND_CONFIG],\n    )\n\n    return {\n      route,\n      title: routesConfig.routes[route].title,\n      navigation: {\n        navigate,\n        goBack: history.goBack,\n      },\n    }\n  }\n}\n","import { useState, useEffect } from 'react'\nimport { Dimensions } from 'react-native'\n\nexport type WindowSize = 'BIG' | 'SMALL'\nconst LARGE_SCREEN_LENGTH = 720\n\nfunction calcWindowSize(): WindowSize {\n  const { width, height } = Dimensions.get('window')\n  return width >= LARGE_SCREEN_LENGTH && height >= LARGE_SCREEN_LENGTH\n    ? 'BIG'\n    : 'SMALL'\n}\n\nexport function useWindowSize() {\n  const [size, setSize] = useState<WindowSize>(calcWindowSize)\n  useEffect(() => {\n    function handleWindowSizeChange() {\n      setSize(calcWindowSize())\n    }\n    Dimensions.addEventListener('change', handleWindowSizeChange)\n    // unsubscribe when effect destroyed\n    return () =>\n      Dimensions.removeEventListener('change', handleWindowSizeChange)\n  }, [setSize])\n  return size\n}\n","/// <reference path=\"lib.d.ts\"/>\n\nimport createHistory from 'history/createBrowserHistory'\nimport React, { FunctionComponent, useState } from 'react'\nimport { StyleProp, StyleSheet, Text, View, ViewStyle } from 'react-native'\nimport { TransitionGroup } from 'react-transition-group'\nimport { NavigationProps } from './common/types'\nimport { Fade } from './Fade'\nimport Home from './Home'\nimport ResultPage from './ResultPage'\nimport { A, NaturalRankWithoutJokers } from './strategy/models/const'\nimport { useCardState } from './useCardState'\nimport { useResultState } from './useResultState'\nimport { createBrowserRouterHook } from './useRouterState'\nimport { useWindowSize } from './useWindowSize'\nimport { QueryClient, QueryClientProvider } from 'react-query'\n\ninterface AppNavigatorProps extends NavigationProps {\n  route: string\n  style?: StyleProp<ViewStyle>\n}\nconst styles = StyleSheet.create({\n  absoluteChild: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n  },\n})\n\nconst routes = {\n  Home,\n  Result: ResultPage,\n}\nconst AppNavigator: FunctionComponent<AppNavigatorProps> = ({\n  route: currentRoute,\n  navigation,\n  screenProps,\n  style,\n}) => {\n  return (\n    <>\n      <TransitionGroup>\n        {Object.entries(routes).map(([route, RouteComponent]) => {\n          if (route !== currentRoute) return null\n\n          return (\n            <Fade\n              key={route}\n              style={[styles.absoluteChild, style]}\n              timeout={300}\n            >\n              <RouteComponent\n                screenProps={screenProps}\n                navigation={navigation}\n              />\n            </Fade>\n          )\n        })}\n      </TransitionGroup>\n    </>\n  )\n}\n\nconst routesConfig = {\n  base: process.env.REACT_APP_BASE_URL || '',\n  defaultRoute: 'Home',\n  routes: {\n    Home: {\n      path: '',\n      title: '掼蛋拆牌计算器',\n    },\n    Result: {\n      path: '/result',\n      title: '掼蛋拆牌计算器',\n    },\n  },\n}\nconst history = createHistory()\n\nconst useRouterState = createBrowserRouterHook(routesConfig, history)\n\nfunction App() {\n  const [rank, setRank] = useState<NaturalRankWithoutJokers>(A)\n  const cardStateProps = useCardState()\n  const resultProps = useResultState()\n  const { route, navigation } = useRouterState()\n  const windowSize = useWindowSize()\n\n  return (\n    <View\n      style={{\n        flex: 1,\n        backgroundColor: 'lightblue',\n        height: '100%',\n      }}\n    >\n      <View style={{ height: '100%' }}>\n        <Text style={{ fontSize: 14 }}>掼蛋拆牌计算器</Text>\n        <View style={{ flex: 1 }}>\n          <AppNavigator\n            route={route}\n            screenProps={{\n              rank,\n              setRank,\n              ...cardStateProps,\n              ...resultProps,\n              windowSize,\n            }}\n            navigation={navigation}\n            style={{\n              flex: 1,\n            }}\n          />\n        </View>\n      </View>\n    </View>\n  )\n}\n\n// Create a client\nconst queryClient = new QueryClient()\nconst EnhancedApp = () => (\n  <QueryClientProvider client={queryClient}>\n    <App />\n  </QueryClientProvider>\n)\n\nexport default EnhancedApp\n","import { useCallback, useState } from 'react'\nimport { generateRandomHands } from './common/cardUtils'\nimport { CardState } from './common/types'\nimport { CardRaw } from './strategy/models/const'\n\nexport function useCardState(): CardState {\n  const [cards, setCards] = useState<CardRaw[]>([])\n  const clearCards = useCallback(() => setCards([]), [setCards])\n  const addCard = useCallback(\n    (card) => setCards((cardsNow) => cardsNow.concat(card)),\n    [setCards],\n  )\n  const randomCards = useCallback(() => setCards(generateRandomHands()), [\n    setCards,\n  ])\n  const deleteLastCard = useCallback(\n    () => setCards((cardsNow) => cardsNow.slice(0, cardsNow.length - 1)),\n    [setCards],\n  )\n  return {\n    cards,\n    clearCards,\n    addCard,\n    randomCards,\n    deleteLastCard,\n  }\n}\n","import { useState } from 'react'\nimport { Plan } from './strategy/models/Plan'\n\nexport type StrategyResult = null | 'loading' | { title: string; plans: Plan[] }\nexport interface ResultProps {\n  strategyResult: StrategyResult[]\n  setResult: (result: StrategyResult[]) => void\n}\nexport const useResultState = () => {\n  const [strategyResult, setResult] = useState<StrategyResult[]>([])\n  return {\n    strategyResult,\n    setResult,\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { AppRegistry } from 'react-native'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nAppRegistry.registerComponent('App', () => App)\nAppRegistry.runApplication('App', {\n  rootTag: document.getElementById('root'),\n})\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register({\n  onSuccess: () => console.log('service worker loaded successfully'),\n  onUpdate: () => console.log('service worker is updated'),\n})\n\nfunction removeWechatGuidance() {\n  const guidanceNode = window.document.getElementById('wechat-guidance')\n  if (guidanceNode) {\n    const parentNode = guidanceNode.parentNode\n    if (parentNode) {\n      parentNode.removeChild(guidanceNode)\n    }\n  }\n}\n\nremoveWechatGuidance()\n"],"sourceRoot":""}