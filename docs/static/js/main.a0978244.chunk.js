(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var a=n(117),r=(n(85),n(82)),o=n(15),l=n(1),i=n.n(l),c=n(5),u=n(10),s=n(76),d=n(24),f=["2","3","4","5","6","7","8","9",{value:"0",label:"10",isJoker:!1},"J","Q","K","A",{value:"X",label:"Joker",isJoker:!0}].map(function(e){if("object"===typeof e)return e;return{label:e,value:e,isJoker:!1}}),m=f.reduce(function(e,t){return e[t.value]=t,e},{}),g={H:{value:"H",label:"\u2665",color:"red"},D:{value:"D",label:"\u2666",color:"red"},S:{value:"S",label:"\u2660",color:"black"},C:{value:"C",label:"\u2663",color:"black"},B:{value:"B",label:"",color:"black"},R:{value:"R",label:"",color:"red"}},b=[g.H,g.S,g.C,g.D],h=[g.B,g.R],y=f.map(function(e){return e.isJoker?h.map(function(t){return{rank:e.value,suit:t.value}}):b.map(function(t){return{rank:e.value,suit:t.value}})}).reduce(function(e,t){return e.push.apply(e,Object(d.a)(t)),e},[]);function v(e,t){var n=f.findIndex(function(t){return t.value===e.rank}),a=f.findIndex(function(e){return e.value===t.rank});if(-1===n||-1===a)throw new Error("rank not found for cards, "+e+" "+t);return n!==a?n-a:e.suit<t.suit?-1:e.suit===t.suit?0:1}function p(){return function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[n],e[n]=a}return e}([].concat(Object(d.a)(y),Object(d.a)(y))).slice(0,27).sort(v)}function E(e,t){return e.filter(function(e){return 0===v(e,t)}).length<2}var k=n(116),w=n(80),A=c.a.create({divider:{height:2,backgroundColor:"black",marginHorizontal:10}});function C(){return i.a.createElement(u.a,{style:A.divider})}var j=n(81),O=n(75),R=n.n(O),S=c.a.create({card:{width:74,height:100,backgroundColor:"white",borderColor:"black",borderWidth:2,borderRadius:4},cardStacked:{marginRight:-52,marginBottom:-52}});function x(e){var t=e.rank,n=e.suit,a=e.isStacked,r=e.disabled,o=e.style,l=m[t],c=g[n];return i.a.createElement(u.a,{style:[S.card,a&&S.cardStacked,o]},i.a.createElement(s.a,{style:{fontFamily:"monospace",fontSize:16,color:c.color,lineHeight:16,textAlign:"center",width:20,marginTop:4,fontWeight:"bold"}},"10"===l.label?l.label:l.label.split("").join("\n"),"\n",c.label),i.a.createElement(j.a,{source:{uri:R.a},style:{position:"absolute",left:"calc(50% - 20px)",top:"calc(50% - 20px)",width:40,height:40}}),r&&i.a.createElement(u.a,{style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.3)"}}))}var W=function(e){var t=e.cards,n=e.hands,a=e.style;return i.a.createElement(w.a,{style:a,contentContainerStyle:{flexWrap:"wrap",flexDirection:"row",padding:0,paddingRight:52,paddingBottom:52}},!!t&&t.map(function(e,t){return i.a.createElement(x,Object.assign({key:e.rank+e.suit+t},e,{isStacked:!0}))}),!!n&&n.map(function(e,t){var n=e.map(function(e,t){return i.a.createElement(x,Object.assign({key:e.rank+e.suit+t},e,{isStacked:!0}))});return t>0?i.a.createElement(u.a,{style:{flexDirection:"row",flexWrap:"nowrap",marginRight:13},key:t},n):i.a.createElement(u.a,{style:{flexDirection:"row",flexWrap:"wrap",marginRight:13,maxWidth:"100%"},key:t},n)}))},J=n(49),B=function(e){var t=e.style,n=e.titleStyle,a=e.title,r=e.disabled,o=Object(J.a)(e,["style","titleStyle","title","disabled"]);return i.a.createElement(k.a,Object.assign({style:[{backgroundColor:r?H.disabled.background:H.button.background,borderRadius:2,paddingVertical:8,paddingHorizontal:4,alignItems:"center",justifyContent:"center"},t],disabled:r},o),i.a.createElement(s.a,{style:[{color:r?H.disabled.text:"white",textAlign:"center"},n]},a))},I="rgb(33, 150, 243)",D={0:"black",4:"rgb(161, 161, 161)",6:"rgb(223, 223, 223)",8:"white"},H={disabled:{background:D[6],text:D[4]},button:{background:I}};var z=c.a.create({incDecButton:{flex:2,minWidth:80,maxWidth:200,margin:6},actionButton:{flex:1,minWidth:80,maxWidth:150,margin:6},buttonTitle:{fontSize:20},buttonTitleSmall:{fontSize:20}}),K=function(e){return i.a.createElement(u.a,null,i.a.createElement(u.a,{style:{flexDirection:"row",justifyContent:"center",alignContent:"center"}},i.a.createElement(B,{onPress:e.decRank,disabled:e.rankID<=0,title:"<",style:z.incDecButton,titleStyle:z.buttonTitle}),i.a.createElement(B,{onPress:e.incRank,title:">",disabled:e.rankID>=f.length-1,style:z.incDecButton,titleStyle:z.buttonTitle})),i.a.createElement(u.a,{style:{flexDirection:"row",justifyContent:"center",alignContent:"center"}},i.a.createElement(B,{onPress:e.randomCards,title:"\u968f\u673a\u53d1\u724c",disabled:e.numberOfCards>0,style:z.actionButton,titleStyle:z.buttonTitleSmall}),i.a.createElement(B,{onPress:e.clearCards,title:"\u6e05\u9664",disabled:0===e.numberOfCards,style:z.actionButton,titleStyle:z.buttonTitle}),i.a.createElement(B,{onPress:e.deleteLastCard,title:"\u5220\u9664",disabled:0===e.numberOfCards,style:z.actionButton,titleStyle:z.buttonTitle})))},P=function(e){return i.a.createElement(i.a.Fragment,null,(f[e.rankID].isJoker?h:b).map(function(t){var n={suit:t.value,rank:f[e.rankID].value},a=E(e.cards,n);return i.a.createElement(k.a,{key:t.value,onPress:function(){return e.addCard(n)},disabled:!a},i.a.createElement(x,{suit:t.value,rank:f[e.rankID].value,disabled:!a,style:{margin:3}}))}))};function T(e){var t=e.cards,n=e.addCard,a=e.clearCards,r=e.randomCards,c=e.deleteLastCard,d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Object(l.useState)(e),n=Object(o.a)(t,2),a=n[0],r=n[1];return{value:a,increase:Object(l.useCallback)(function(){return r(function(e){return e+1})},[r]),decrease:Object(l.useCallback)(function(){return r(function(e){return e-1})},[r])}}(),f=d.value,m=d.increase,g=d.decrease;return i.a.createElement(u.a,{style:{flex:1}},i.a.createElement(u.a,{style:{flex:1,alignItems:"center",justifyContent:"center"}},i.a.createElement(W,{cards:t,style:{height:60,padding:6}})),i.a.createElement(C,null),i.a.createElement(s.a,{style:{fontSize:14,margin:4}},"\u70b9\u51fb\u6251\u514b\u724c\u6dfb\u52a0\uff0c\u76ee\u524d\u5df2\u6709".concat(t.length,"\u5f20\u724c")),i.a.createElement(w.a,{style:{height:110,flexGrow:0},contentContainerStyle:{flex:1,justifyContent:"center"},horizontal:!0},i.a.createElement(P,{cards:t,addCard:n,rankID:f})),i.a.createElement(K,{numberOfCards:t.length,clearCards:a,randomCards:r,deleteLastCard:c,rankID:f,incRank:m,decRank:g}))}function F(e){return{calc:function(t,n){var a=e.calc(t,n.charCodeAt(0)),r=a.minHands,o=function(e){for(var t=[],n=0;n<e.size();++n)t.push(e.get(n));return t}(a.solutions);return{minHands:r,solutionsRaw:o,solutions:L(o)}}}}var M=/[0-9A-Z]{2}/;function V(e,t,n){var a=Object(d.a)(t),r=Object(d.a)(e);if(e.forEach(function(e,t){e.forEach(function(e,o){if(a.length>0){var l=a.indexOf(e);if(l>=0){a.splice(l,1);var i=Object(d.a)(r[t]);i.splice(o,1,n),r[t]=i}}})}),a.length>0)throw new Error('Cannot find all wildcards, double check the data, hands = "'.concat(e,'", usedWildCards = "').concat(t,'", wildCard="').concat(n,'"'));return r}function L(e){try{return function(e){for(var t=[],n=null,a=0;a<e.length;++a){if(0===e[a].length)throw new Error("solutions shouldn't have empty line: #"+a);if("-"===e[a][0]){var r=e[a];n=r.split(" ").filter(function(e){return e.match(M)})}else{if(null==n)throw new Error("wildcard definition should be before solution definition");var o=e[a],l=o.split("|").map(function(e){return e.split(" ").filter(function(e){return e.match(M)})}).filter(function(e){return e.length>0}),i=V(l,n,"??");t.push({wildCards:n,actualHands:i,asHands:l})}}return t}(e)}catch(t){throw console.log(e),t}}var Q=c.a.create({container:{padding:10},borderBox:{borderWidth:2,borderColor:"black"}}),Z=n(118);function G(e){var t=e.rank,n=e.setRank;return i.a.createElement(u.a,{style:{flexDirection:"row"}},i.a.createElement(s.a,{style:{fontSize:22,marginHorizontal:6}},"\u5f53\u524d\u6253",i.a.createElement(Z.a,{selectedValue:t,onValueChange:function(e){return n(e)}},f.filter(function(e){return!e.isJoker}).map(function(e){return i.a.createElement(Z.a.Item,{key:e.value,label:e.label,value:e.value})}))," ",i.a.createElement(s.a,{style:{color:g.H.color}},g.H.label,m[t].label),"\u662f\u767e\u642d"))}var U=null,Y=i.a.memo(function(e){var t=e.rank,n=e.setRank,a=e.cards,r=e.clearCards,o=e.addCard,c=e.randomCards,s=e.deleteLastCard,d=e.strategyResult,f=e.setResult,m=e.navigation;Object(l.useEffect)(function(){new Promise(function(e,t){if(window.Module)return e(F(window.Module));var n=document.createElement("script");n.src="res/strategy.js",n.onload=function(){var n=window.Module;n.onRuntimeInitialized=function(){e(F(window.Module))},n.onAbort=function(){t("wasm module aborted during loading")}},n.onerror=function(){return t("wasm module failed to load")},document.body.appendChild(n)}).then(function(e){U=e})},[]);var g=Object(l.useCallback)(function(){f("loading"),setTimeout(function(){if(null==U)throw new Error("strategy module is null");var e=function(e){return e.map(function(e){return"X"===e.rank?"R"===e.suit?"BJ":"SJ":e.rank+e.suit}).join("")}(a),n=U.calc(e,t);setTimeout(function(){m.navigate("Result"),f(n)},300)},0)},[a,f,m]);return i.a.createElement(l.Fragment,null,i.a.createElement(u.a,{style:[Q.container,{height:40,justifyContent:"center",alignItems:"center"}]},i.a.createElement(G,{rank:t,setRank:n})),i.a.createElement(C,null),i.a.createElement(u.a,{style:{flex:1}},i.a.createElement(T,{cards:a,addCard:o,clearCards:r,randomCards:c,deleteLastCard:s})),i.a.createElement(u.a,{style:[Q.container,{justifyContent:"center",padding:6}]},function(){var e="loading"!==d;return i.a.createElement(B,{title:e?"\u5f00\u59cb\u62c6\u724c":"\u62c6\u724c\u4e2d...",disabled:!e,onPress:g,style:{height:60},titleStyle:{fontSize:28}})}()))});var X=function(e){var t=e.screenProps,n=e.navigation;return i.a.createElement(Y,Object.assign({},t,{navigation:n}))};function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var N=i.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),$=i.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}),_=function(e){return i.a.createElement("svg",q({width:24,height:24,viewBox:"0 0 24 24"},e),N,$)},ee=(n.p,function(e){return i.a.createElement(k.a,{style:[{width:40,flexDirection:"row",justifyContent:"center",alignItems:"center"},e.style],onPress:e.toggleWindowSize},i.a.createElement(_,null))}),te=Object(l.memo)(function(e){return i.a.createElement(w.a,{style:[Q.container,{flex:2}]},e.strategyResult&&("loading"===e.strategyResult?i.a.createElement(s.a,{style:{fontSize:20}}):i.a.createElement(i.a.Fragment,null,i.a.createElement(s.a,null,"\u6700\u5c11".concat(e.strategyResult.minHands,"\u624b\u53ef\u4ee5\u51fa\u5b8c")),i.a.createElement(u.a,null,function(){var t=e.strategyResult.solutions.length-10;return i.a.createElement(i.a.Fragment,null,e.strategyResult.solutions.slice(0,10).map(function(t,n){return i.a.createElement(W,{key:n,hands:t.actualHands.map(function(t){return t.map(function(t){return function(e,t){if(2!==e.length)throw new Error("CardRaw should have a length of 2");return"BJ"===e?{rank:"X",suit:"R"}:"SJ"===e?{rank:"X",suit:"B"}:"??"===e?t:{rank:e[0],suit:e[1]}}(t,{rank:e.rank,suit:"H"})})}),style:{margin:6}})}),t>0&&"\u8fd8\u6709".concat(t,"\u79cd\u65b9\u6848\u53ef\u4ee5\u8fbe\u5230\u540c\u6837\u7684\u6700\u5c11\u624b\u6570"))}()))))}),ne=i.a.memo(function(e){var t=e.strategyResult,n=e.rank,a=e.onClose;return i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,{style:{flexDirection:"row",justifyContent:"flex-end",alignContent:"center"}},i.a.createElement(u.a,{style:{flex:1}},i.a.createElement(s.a,{style:{fontSize:20,padding:4,textAlign:"center"}},"\u62c6\u724c\u7b56\u7565\u8ba1\u7b97\u7ed3\u679c")),i.a.createElement(ee,{toggleWindowSize:a,style:{position:"absolute",right:0,height:"100%"}})),i.a.createElement(C,null),i.a.createElement(te,{strategyResult:t,rank:n}))});var ae=function(e){var t=e.screenProps,n=e.navigation,a=t.strategyResult,r=t.rank,o=Object(l.useCallback)(function(){n.navigate("Home")},[n]);return i.a.createElement(ne,{strategyResult:a,rank:r,onClose:o})},re=function(){var e=Object(l.useState)(null),t=Object(o.a)(e,2);return{strategyResult:t[0],setResult:t[1]}},oe=n(115),le=n(48);function ie(e){return requestAnimationFrame(function(){requestAnimationFrame(function(){requestAnimationFrame(function(){e()})})})}var ce=function(e){var t=e.children,n=e.style,a=e.timeout,r=Object(J.a)(e,["children","style","timeout"]),c=Object(l.useState)(new oe.a.Value(0)),u=Object(o.a)(c,2),s=u[0];u[1];return i.a.createElement(le.Transition,Object.assign({timeout:a+300,onEntering:function(){ie(function(){oe.a.timing(s,{toValue:1,duration:a}).start()})},onExiting:function(){ie(function(){oe.a.timing(s,{toValue:0,duration:a}).start()})}},r),i.a.createElement(oe.a.View,{style:[{opacity:s},n]},t))};ce.defaultProps={appear:!0,enter:!0,mountOnEnter:!0,unmountOnExit:!0};var ue=c.a.create({absoluteChild:{position:"absolute",left:0,top:0,right:0,bottom:0}}),se={Home:X,Result:ae},de=function(e){var t=e.route,n=e.navigate,a=e.screenProps,r=e.style,c=Object(l.useMemo)(function(){return{navigate:n}},[n]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(le.TransitionGroup,null,Object.entries(se).map(function(e){var n=Object(o.a)(e,2),l=n[0],u=n[1];return l!==t?null:i.a.createElement(ce,{key:l,style:[ue.absoluteChild,r],timeout:300},i.a.createElement(u,{screenProps:a,navigation:c}))})))};var fe=function(){var e=Object(l.useState)("2"),t=Object(o.a)(e,2),n=t[0],a=t[1],c=function(){var e=Object(l.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1];return{cards:n,clearCards:Object(l.useCallback)(function(){return a([])},[a]),addCard:Object(l.useCallback)(function(e){return a(function(t){return t.concat(e)})},[a]),randomCards:Object(l.useCallback)(function(){return a(p())},[a]),deleteLastCard:Object(l.useCallback)(function(){return a(function(e){return e.slice(0,e.length-1)})},[a])}}(),d=re(),f=Object(l.useState)("Home"),m=Object(o.a)(f,2),g=m[0],b=m[1];return i.a.createElement(u.a,{style:{flex:1,backgroundColor:"lightblue",height:"100%"}},i.a.createElement(u.a,{style:{height:"100%"}},i.a.createElement(s.a,{style:{fontSize:14}},"\u63bc\u86cb\u62c6\u724c\u8ba1\u7b97\u5668"),i.a.createElement(u.a,{style:{flex:1}},i.a.createElement(de,{route:g,screenProps:Object(r.a)({rank:n,setRank:a},c,d),navigate:b,style:{flex:1}}))))},me=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ge(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}a.a.registerComponent("App",function(){return fe}),a.a.runApplication("App",{rootTag:document.getElementById("root")}),function(e){if("serviceWorker"in navigator){if(new URL("/poker-guandan-strategy",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/poker-guandan-strategy","/service-worker.js");me?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ge(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):ge(t,e)})}}({onSuccess:function(){return console.log("service worker loaded successfully")},onUpdate:function(){return console.log("service worker is updated")}}),function(){var e=window.document.getElementById("wechat-guidance");if(e){var t=e.parentNode;t&&t.removeChild(e)}}()},75:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAQAAAAm93DmAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfjAhUINB2XPPnXAAAEaElEQVRIx52WWWxUZRTHf3e2TmfrdJlaSWlRlkK6AA1BiCQNWzRIUBACwS1Go2LE0JASwaSVh8qDxroEhBcJFBMTbNQGFRIftAqoIBpKY9vU0EUK0xY6bYdZ78zxodLZ7nTh/3bv+c7vnO+c8333wv0olwp0M3EoZBMZaa0KB/mFnJkAd+BhW1rrKr1b6aV4JsDXHWJpZYGmLcdwdqvMGqRM21W7Es71bCmjFpuG7cWV62qwmrDMJMP63fKPLA3yhjHZsjynt1nuyJIA67VdDZpvc208TJ3ppZrbV2jHRTYWwIuP/c/O3kCQLCO50wfqsDsI4aSwaPiEy5eX77SaDeAPDQcHsjv4kJWYdem6rAXUK47f2M5tqtg3byEF2DAihDO93KKV83xFB5Rg5e506mdgQ0bXajkuNyQqWopIjxyVR/3GM1RNPd5ZHJx/56gMy1QakPekyE0N1slwLuXkOvWPKWHjisrPsiLIYZzpcNmceira9//yoLSLOwHgl0tyMwnaIWtUjmjOKwYOrY30TSxtEpdsE1+c8xdikxcknIJcHuKtWC1jRX1szq53dYUTj0bCWBJqbqOYwpQuLKDe+EA1q1KaofxQnxA5KJfFLaoEREQVv4hEZFD8ml3fKzSRmQjcXO7v0VjcJPslJEekJmWr8bomxSOsid+yjk2Pm4sSIrj5Hcihidf4iJI0Z3RcC1ntYKMS96bA2vZ9UtRjsklCEpW3BdknYRG5LuckkibHE6K/SNZ4bwEKXbOSLz8HrRzCyRnycRPEwHE6WZsmxzKyi4cKGLkHzHdZks/6RsY4Thd1VLCbXRRymnfQpwEWkGcfirt/nlwV9mpspFmWyYCIXJC5skJOJkxlogZlsY+qWFN8PjWgEbecMFcAJzbe57nkyYiTD1+YQAzoHvAOaSwrYi0f0EcjD7KUydTPkIfBGPDfwe5rGst07EXhCb7kzSk+IX/h6eLWxGMGNLya5vbrlQZpFnXSeycoW4TaxBBVDw23yf3qguTfojIRmMHne6bII50C8rxwOHWiluX1NN8XsFHs7SxKKaseXll8988Z41pknocd2q0yUfeIf7ofgHH9KKVjVKc9QJg5UDry9aRXVUxBOSVzh9iNkUlkYHtu9x7pTDNE9xSRq/Ky2L08g5IISE42SmegKlByji4cZGsG93KJjzlGDn2BsU/oS84oWZmG/APY2ck3zKeCcopwYATCeOjmKq10E6CRUjba+mdzcSqgJdOZw2VG1R2GCvaOqS3OrMxsvRlUv++Ox++o+tTsppYeKjGm7lADqFMMn/Fdf+Ts+Z0FZrUzVD0QwooJCOElK3S6t6RJ9bQ2lFaaIiDJ7rGS5lNJMS7mKFuVrOgNbuqWWAzeUfqQCTcFhSKzPaRGr+vnPG38VXp/oo1Rhujnb9pQ44EL2cwiCnBiwoYBK1HAhDmlbRECKIgSJChRvHi5TQ8tfEuQpKbrMJFBBhb02NEBFo3fDJVhBAjgJ8xdQoQI3zP+B8PxaLIJz6YTAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTAyLTIxVDA4OjUyOjI5KzAwOjAwIu73FAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wMi0yMVQwODo1MjoyOSswMDowMFOzT6gAAAAASUVORK5CYII="},84:function(e,t,n){e.exports=n(108)},85:function(e,t,n){}},[[84,1,2]]]);
//# sourceMappingURL=main.a0978244.chunk.js.map