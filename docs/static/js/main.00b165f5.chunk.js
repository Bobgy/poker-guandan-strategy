(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(e,t,n){"use strict";n.r(t);var a=n(152),r=(n(91),n(87)),l=n(19),o=n(1),i=n.n(o),c=n(9),u=n(84),s=n(150),d=n(31),f=n(70),m=n(153),b=["2","3","4","5","6","7","8","9",{value:"0",label:"10",isJoker:!1},"J","Q","K","A",{value:"X",label:"Joker",isJoker:!0}].map(function(e){if("object"===typeof e)return e;return{label:e,value:e,isJoker:!1}}),h=b.reduce(function(e,t){return e[t.value]=t,e},{}),g={H:{value:"H",label:"\u2665",color:"red"},D:{value:"D",label:"\u2666",color:"red"},S:{value:"S",label:"\u2660",color:"black"},C:{value:"C",label:"\u2663",color:"black"},B:{value:"B",label:"",color:"black"},R:{value:"R",label:"",color:"red"}},k=[g.H,g.S,g.C,g.D],v=[g.B,g.R];function E(e){var t=e.rank,n=e.setRank;return i.a.createElement(c.a,{style:{flexDirection:"row"}},i.a.createElement(u.a,{style:{fontSize:22,marginHorizontal:6}},"\u5f53\u524d\u6253",i.a.createElement(m.a,{selectedValue:t,onValueChange:function(e){return n(e)}},b.filter(function(e){return!e.isJoker}).map(function(e){return i.a.createElement(m.a.Item,{key:e.value,label:e.label,value:e.value})}))," ",i.a.createElement(u.a,{style:{color:g.H.color}},g.H.label,h[t].label),"\u662f\u767e\u642d"))}var p=n(2),w=n(151),y=n(88),C=n(86),j=p.a.create({divider:{height:2,backgroundColor:"black"}});function O(){return i.a.createElement(c.a,{style:j.divider})}function S(e){var t=e.rank,n=e.suit,a=e.isStacked,r=h[t],l=g[n];return i.a.createElement(c.a,{style:[P.card,a&&P.cardStacked]},i.a.createElement(u.a,{style:{fontFamily:"monospace",fontSize:16,color:l.color,lineHeight:16,textAlign:"center",width:20,marginTop:4,fontWeight:"bold"}},"10"===r.label?r.label:r.label.split("").join("\n"),"\n",l.label))}var x=function(e){var t=e.cards,n=e.hands;return i.a.createElement(w.a,{style:{flex:1,minHeight:60},contentContainerStyle:{flexWrap:"wrap",flexDirection:"row",paddingRight:60,paddingBottom:60,overflow:"hidden"}},!!t&&t.map(function(e,t){return i.a.createElement(S,Object.assign({key:e.rank+e.suit+t},e,{isStacked:!0}))}),!!n&&n.map(function(e,t){var n=e.map(function(e,t){return i.a.createElement(S,Object.assign({key:e.rank+e.suit+t},e,{isStacked:!0}))});return t>0?i.a.createElement(o.Fragment,{key:t},i.a.createElement(c.a,{style:{width:20}}),n):n}))},R="rgb(33, 150, 243)",H={0:"black",4:"rgb(161, 161, 161)",6:"rgb(223, 223, 223)",8:"white"},B={disabled:{background:H[6],text:H[4]},button:{background:R}};var D=function(e){var t=e.style,n=e.titleStyle,a=e.title,r=e.disabled,l=Object(y.a)(e,["style","titleStyle","title","disabled"]);return i.a.createElement(C.a,Object.assign({style:[{backgroundColor:r?B.disabled.background:B.button.background,borderRadius:2,padding:4,alignItems:"center",justifyContent:"center"},t],disabled:r},l),i.a.createElement(u.a,{style:[{color:r?B.disabled.text:"white"},n]},a))},J=p.a.create({incDecButton:{flex:2,minWidth:100,maxWidth:200,margin:10},clearButton:{flex:1,minWidth:100,maxWidth:150,margin:10},buttonTitle:{fontSize:30}}),W=function(e){return i.a.createElement(c.a,{style:{flexDirection:"row",justifyContent:"center",alignContent:"center"}},i.a.createElement(D,{onPress:e.clearCards,title:"\u6e05\u9664",disabled:0===e.numberOfCards,style:J.clearButton,titleStyle:J.buttonTitle}),i.a.createElement(D,{onPress:e.decRank,disabled:e.rankID<=0,title:"<",style:J.incDecButton,titleStyle:J.buttonTitle}),i.a.createElement(D,{onPress:e.incRank,title:">",disabled:e.rankID>=b.length-1,style:J.incDecButton,titleStyle:J.buttonTitle}))};function A(e){var t=e.cards,n=e.addCard,a=e.clearCards,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Object(o.useState)(e),n=Object(l.a)(t,2),a=n[0],r=n[1];return{value:a,increase:Object(o.useCallback)(function(){return r(function(e){return e+1})},[r]),decrease:Object(o.useCallback)(function(){return r(function(e){return e-1})},[r])}}(),u=r.value,s=r.increase,d=r.decrease;return i.a.createElement(c.a,{style:{flex:1}},i.a.createElement(x,{cards:t}),i.a.createElement(O,null),i.a.createElement(w.a,{style:{height:110,flexGrow:0},contentContainerStyle:{flex:1,justifyContent:"center"},horizontal:!0},(b[u].isJoker?v:k).map(function(e){return i.a.createElement(C.a,{key:e.value,onPress:function(){return n({suit:e.value,rank:b[u].value})}},i.a.createElement(S,{suit:e.value,rank:b[u].value}))})),i.a.createElement(W,{numberOfCards:t.length,clearCards:a,rankID:u,incRank:s,decRank:d}))}var P=p.a.create({card:{width:80,height:60*1.618,backgroundColor:"white",borderColor:"black",borderWidth:2,margin:3},cardStacked:{marginRight:-60,marginBottom:-60}}),z=n(47);function I(e){return{calc:function(t,n){var a=e.calc(t,n.charCodeAt(0)),r=a.minHands,l=function(e){for(var t=[],n=0;n<e.size();++n)t.push(e.get(n));return t}(a.solutions);return{minHands:r,solutionsRaw:l,solutions:X(l)}}}}var T=/[0-9A-Z]{2}/;function M(e,t,n){var a=Object(z.a)(t),r=Object(z.a)(e);if(e.forEach(function(e,t){e.forEach(function(e,l){if(a.length>0){var o=a.indexOf(e);if(o>=0){a.splice(o,1);var i=Object(z.a)(r[t]);i.splice(l,1,n),r[t]=i}}})}),a.length>0)throw new Error('Cannot find all wildcards, double check the data, hands = "'.concat(e,'", usedWildCards = "').concat(t,'", wildCard="').concat(n,'"'));return r}function X(e){try{return function(e){for(var t=[],n=null,a=0;a<e.length;++a){if(0===e[a].length)throw new Error("solutions shouldn't have empty line: #"+a);if("-"===e[a][0]){var r=e[a];n=r.split(" ").filter(function(e){return e.match(T)})}else{if(null==n)throw new Error("wildcard definition should be before solution definition");var l=e[a],o=l.split("|").map(function(e){return e.split(" ").filter(function(e){return e.match(T)})}).filter(function(e){return e.length>0}),i=M(o,n,"??");t.push({wildCards:n,actualHands:i,asHands:o})}}return console.log(t),t}(e)}catch(t){throw console.log(e),t}}var F=null;var G=p.a.create({container:{padding:10},borderBox:{borderWidth:2,borderColor:"black"}});function N(e){var t=e.screenProps;Object(o.useEffect)(function(){new Promise(function(e,t){if(window.Module)return e(I(window.Module));var n=document.createElement("script");n.src="res/strategy.js",n.onload=function(){var n=window.Module;n.onRuntimeInitialized=function(){e(I(window.Module))},n.onAbort=function(){t("wasm module aborted during loading")}},n.onerror=function(){return t("wasm module failed to load")},document.body.appendChild(n)}).then(function(e){F=e})},[]);var n=t.rank,a=t.setRank,r=t.cards,d=t.clearCards,f=t.addCard,m=Object(o.useState)(null),b=Object(l.a)(m,2),h=b[0],g=b[1];return i.a.createElement(w.a,{style:[G.borderBox,{height:"100%"}],contentContainerStyle:{height:"100%"}},i.a.createElement(u.a,{style:{fontSize:20,padding:4,textAlign:"center"}},"\u62c6\u724c\u7b56\u7565\u8ba1\u7b97\u7ed3\u679c"),i.a.createElement(O,null),i.a.createElement(w.a,{style:[G.container,{flex:2}]},h&&i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,null,"\u6700\u5c11".concat(h.minHands,"\u624b\u53ef\u4ee5\u51fa\u5b8c")),i.a.createElement(c.a,null,h.solutions.map(function(e,t){return i.a.createElement(x,{key:t,hands:e.actualHands.map(function(e){return e.map(function(e){return function(e,t){if(2!==e.length)throw new Error("CardRaw should have a length of 2");return"BJ"===e?{rank:"X",suit:"R"}:"SJ"===e?{rank:"X",suit:"B"}:"??"===e?t:{rank:e[0],suit:e[1]}}(e,{rank:n,suit:"H"})})})})})))),i.a.createElement(O,null),i.a.createElement(c.a,{style:[G.container,{height:40,justifyContent:"center",alignItems:"center"}]},i.a.createElement(E,{rank:n,setRank:a})),i.a.createElement(O,null),i.a.createElement(c.a,{style:[G.container,{flex:1}]},i.a.createElement(A,{cards:r,addCard:f,clearCards:d})),i.a.createElement(O,null),i.a.createElement(c.a,{style:[G.container,{height:34,justifyContent:"center",padding:0}]},i.a.createElement(s.a,{title:"\u8ba1\u7b97\u7b56\u7565",onPress:function(){if(null!=F){var e=function(e){return e.map(function(e){return"X"===e.rank?"R"===e.suit?"BJ":"SJ":e.rank+e.suit}).join("")}(r);console.log(e),g(F.calc(e,n))}}})))}N.navigationOptions={title:"\u63bc\u86cb\u7b56\u7565\u8ba1\u7b97"};var V=Object(d.createSwitchNavigator)({Home:N,Details:function(e){return i.a.createElement(c.a,null,i.a.createElement(u.a,null,"Details"),i.a.createElement(s.a,{title:"Go to Home",onPress:function(){return e.navigation.navigate("Home")}}))}},{initialRouteName:"Home"});function K(e){var t=Object(o.useState)("2"),n=Object(l.a)(t,2),a=n[0],u=n[1],s=function(){var e=Object(o.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1];return{cards:n,clearCards:Object(o.useCallback)(function(){return a([])},[a]),addCard:Object(o.useCallback)(function(e){return a(function(t){return t.concat(e)})},[a])}}();return i.a.createElement(c.a,{style:{flex:1,backgroundColor:"lightblue",height:"100%"}},i.a.createElement(V,Object.assign({screenProps:Object(r.a)({rank:a,setRank:u},s)},e)))}K.router=V.router;var Q=Object(f.createBrowserApp)(K);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.registerComponent("App",function(){return Q}),a.a.runApplication("App",{rootTag:document.getElementById("root")}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},90:function(e,t,n){e.exports=n(144)},91:function(e,t,n){}},[[90,1,2]]]);
//# sourceMappingURL=main.00b165f5.chunk.js.map